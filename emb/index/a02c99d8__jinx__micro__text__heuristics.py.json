{"file_rel": "jinx\\micro\\text\\heuristics.py", "file_sha256": "06955afef041f8d92f6ed06c2cb4f0b5ff392a274eda3f7160c182dfff61bf7e", "updated_ts": 1760763313.4599314, "total_chunks": 5, "chunks": [{"sha": "69cbc97e5c032d8a142bbb5d9cf7d68a94c2369f670500765fa33116b0b4fdc0", "index": 0, "path": "a02c99d8__jinx__micro__text__heuristics.py\\69cbc97e5c032d8a142bbb5d9cf7d68a94c2369f670500765fa33116b0b4fdc0.json", "terms": ["score", "return", "_ident", "compile", "def", "import", "not", "search", "python_", "_assign_re", "_call_re", "_code_fence_re", "_struct_tokens", "code_like_score", "float", "from", "str", "struct", "threshold", "__future__", "is_code_like", "annotations", "bool", "bracket", "clamp"], "text_preview": "from __future__ import annotations\n\nimport re\nfrom typing import List, Tuple\n\n# --- Code-like detection ---\n\n_CODE_FENCE_RE = re.compile(r\"```|<python_|</python_\", re.IGNORECASE)\n_IDENT = r\"[A-Za-z_][A-Za-z0-9_]*\"\n_CALL_RE = re.compile(rf\"\\b{_IDENT}\\s*\\(.*", "line_start": 1, "line_end": 44}, {"sha": "824af97402dca2f645e71f7e6d056c144ed0eb748d2ce5cf900c7724a8bd4c3d", "index": 1, "path": "a02c99d8__jinx__micro__text__heuristics.py\\824af97402dca2f645e71f7e6d056c144ed0eb748d2ce5cf900c7724a8bd4c3d.json", "terms": ["str", "lines", "return", "counts", "strip", "compile", "def", "for", "text", "is_code_like_line", "code", "float", "int", "language", "list", "not", "raw", "threshold", "_arrow_re", "_bullet_re", "_clean_frag", "_short_label_re", "extract_preference_fragments", "is_code_like", "max_items"], "text_preview": "except Exception:\n        return False\n\n\ndef is_code_like_line(s: str, threshold: float = 0.5) -> bool:\n    return is_code_like(s, threshold)\n\n\n# --- Preference/Decision extraction (language-agnostic leaning) ---\n\n_BULLET_RE = re.compile(r\"^\\s*(?:[-*â€¢]|\\d+", "line_start": 45, "line_end": 82}, {"sha": "045cefa3313f2b136076fad74b3ad1e19985f8b0985d9d7d9a6b311a08bd4359", "index": 2, "path": "a02c99d8__jinx__micro__text__heuristics.py\\045cefa3313f2b136076fad74b3ad1e19985f8b0985d9d7d9a6b311a08bd4359.json", "terms": ["score", "frag", "group", "_clean_frag", "none", "and", "checkbox", "label", "match", "rest", "_bullet_re", "_short_label_re", "agnostic", "any", "append", "based", "boosts", "bullet", "cand", "continue", "counts", "descending", "duplicate", "else", "endswith"], "text_preview": "continue\n        score = 0.0\n        frag: str | None = None\n        mb = _BULLET_RE.match(ln)\n        if mb:\n            # Bullet or checkbox item is a strong structural preference signal\n            frag = _clean_frag(mb.group(1))\n            score += 1.", "line_start": 83, "line_end": 110}, {"sha": "7ca26fd17471e966cff0085ca6d5776450ca3f15e8bb0f7f4cb93b3ed6d2df0f", "index": 3, "path": "a02c99d8__jinx__micro__text__heuristics.py\\7ca26fd17471e966cff0085ca6d5776450ca3f15e8bb0f7f4cb93b3ed6d2df0f.json", "terms": ["str", "for", "lines", "out", "counts", "cand", "frag", "list", "not", "return", "score", "seen", "text", "_clean_frag", "max_items", "group", "none", "set", "strip", "else", "int", "label", "len", "raw", "rest"], "text_preview": "cand.sort(key=lambda x: (-x[0], len(x[1])))\n    out: List[str] = []\n    seen: set[str] = set()\n    for _sc, fr in cand:\n        if fr and fr not in seen:\n            seen.add(fr)\n            out.append(fr)\n            if len(out) >= max_items:\n            ", "line_start": 111, "line_end": 149}, {"sha": "4481c5178a1658d7c088aad90ef8f6066f8f5d53ca19acae4f3d6f1c86c8ac4f", "index": 4, "path": "a02c99d8__jinx__micro__text__heuristics.py\\4481c5178a1658d7c088aad90ef8f6066f8f5d53ca19acae4f3d6f1c86c8ac4f.json", "terms": ["frag", "score", "out", "cand", "len", "seen", "set", "and", "append", "for", "str", "_bullet_re", "_clean_frag", "_sc", "max_items", "add", "any", "break", "bullet", "counts", "decision", "endswith", "enumerated", "get", "group"], "text_preview": "# Enumerated bullet may indicate a step/decision (e.g., \"1) ...\")\n                mb = _BULLET_RE.match(ln)\n                if mb and any(ch.isdigit() for ch in ln[:4]):\n                    frag = _clean_frag(mb.group(1))\n                    score += 0.6\n ", "line_start": 150, "line_end": 172}], "file_terms": ["score", "str", "frag", "return", "lines", "for", "not", "counts", "cand", "out", "def", "len", "list", "text", "_clean_frag", "group", "strip", "and", "compile", "raw", "seen", "set", "float", "max_items", "none"]}