{"file_rel": "jinx\\micro\\conversation\\cont\\compactor.py", "file_sha256": "d614ee084268855859b31207d6ef96672ef750871661ea25da95ee43e53fd94d", "updated_ts": 1760763310.7236738, "total_chunks": 3, "chunks": [{"sha": "f6590e75fda4f87338469ef98f10674591ed41f9db35fda54dfdd984d8c66534", "index": 0, "path": "9100c0ab__jinx__micro__conversation__cont__compactor.py\\f6590e75fda4f87338469ef98f10674591ed41f9db35fda54dfdd984d8c66534.json", "terms": ["import", "from", "meta", "jinx", "obj", "str", "_cache_path", "kind", "any", "def", "dict", "get", "json", "list", "return", "try", "__import__", "iter_recent_items", "read_text", "write_text", "async", "await", "body", "concept", "continue"], "text_preview": "from __future__ import annotations\n\nimport os\nfrom typing import List, Dict, Any\n\nfrom jinx.async_utils.fs import read_text, write_text\nfrom jinx.micro.embeddings.pipeline import iter_recent_items\nfrom jinx.micro.embeddings.pipeline import embed_text\n\n_CAC", "line_start": 1, "line_end": 39}, {"sha": "d111d030e05b4e61dd1d63fb51950c4e2f7d1e22975cd4df0532ac729b61bb15", "index": 1, "path": "9100c0ab__jinx__micro__conversation__cont__compactor.py\\d111d030e05b4e61dd1d63fb51950c4e2f7d1e22975cd4df0532ac729b61bb15.json", "terms": ["cache", "cnt", "compact", "return", "await", "int", "not", "out", "previews", "_save_cache", "frame_n", "jinx_stateframe_compact_n", "jinx_stateframe_recent_k", "default", "except", "exception", "frames", "get", "getenv", "recent", "_load_cache", "_recent_state_previews", "maybe_compact_state_frames", "text_preview", "and"], "text_preview": "pv = (meta.get(\"text_preview\") or \"\").strip()\n            if not pv:\n                continue\n            out.append(pv)\n            if len(out) >= k:\n                break\n    except Exception:\n        pass\n    return out\n\n\nasync def maybe_compact_state_f", "line_start": 40, "line_end": 83}, {"sha": "d5f3e8b3fccbb5f2e0d8b04c810934266a7f3b3913a4c3881c493e0c34a4a037", "index": 2, "path": "9100c0ab__jinx__micro__conversation__cont__compactor.py\\d5f3e8b3fccbb5f2e0d8b04c810934266a7f3b3913a4c3881c493e0c34a4a037.json", "terms": ["uniq", "body_lines", "await", "seen", "_save_cache", "concept_text", "append", "cache", "for", "not", "embed_text", "add", "and", "break", "concept", "conceptframe", "except", "exception", "join", "kind", "len", "list", "pass", "previews", "return"], "text_preview": "uniq: List[str] = []\n    seen = set()\n    for p in previews:\n        if p and p not in seen:\n            uniq.append(p)\n            seen.add(p)\n        if len(uniq) >= k:\n            break\n    if not uniq:\n        await _save_cache(cache)\n        return\n\n ", "line_start": 84, "line_end": 105}], "file_terms": ["await", "return", "cache", "import", "not", "_save_cache", "meta", "except", "exception", "from", "get", "str", "try", "uniq", "kind", "cnt", "compact", "concept", "def", "int", "jinx", "list", "obj", "out", "previews"]}