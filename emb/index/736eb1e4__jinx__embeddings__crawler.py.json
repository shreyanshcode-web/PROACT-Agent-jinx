{"file_rel": "jinx\\embeddings\\crawler.py", "file_sha256": "ab0672f53a4ecd16844d96b938c917e44d265ce9fcaa5b69bdba6be4e7df0899", "updated_ts": 1760763310.1564734, "total_chunks": 5, "chunks": [{"sha": "f581de9fedbd7c10ca4db892580ad28be5a4590bb4f4567cab7c43505eddcdb4", "index": 0, "path": "736eb1e4__jinx__embeddings__crawler.py\\f581de9fedbd7c10ca4db892580ad28be5a4590bb4f4567cab7c43505eddcdb4.json", "terms": ["import", "str", "asyncio", "sandbox", "tasks", "per", "await", "from", "getenv", "int", "none", "_ensure_paths", "log", "and", "async", "awaitable", "callable", "callback", "def", "file", "for", "gather", "lines", "logs", "max"], "text_preview": "from __future__ import annotations\n\nimport asyncio\nimport os\nfrom typing import Callable, Awaitable, Dict, Set\n\nfrom jinx.log_paths import SANDBOX_DIR\nimport time\n\n# Max lines per second per sandbox file to process (others dropped). Tunable via env.\n_SANDB", "line_start": 1, "line_end": 38}, {"sha": "29de3ec7c57012c4a93afecf917aa4a97521fe366c41943adcef8dd531c8d5e1", "index": 1, "path": "736eb1e4__jinx__embeddings__crawler.py\\29de3ec7c57012c4a93afecf917aa4a97521fe366c41943adcef8dd531c8d5e1.json", "terms": ["lines", "path", "max_bytes", "max_lines", "str", "start", "the", "except", "open", "return", "try", "int", "line", "reads", "strip", "data", "def", "encoding", "errors", "file", "from", "ignore", "oserror", "read", "size"], "text_preview": "# Ensure parent dirs so tailers can open files reliably\n    os.makedirs(SANDBOX_DIR, exist_ok=True)\n    # No trigger_echoes ingestion\n\n\ndef _read_tail_lines(path: str, max_bytes: int, max_lines: int) -> list[str]:\n    \"\"\"Read up to the last `max_lines` lin", "line_start": 39, "line_end": 73}, {"sha": "a9e6714c41da3fb59e166e8ca4403e5e3828fff95c1f815c5f8e817193e47826", "index": 2, "path": "736eb1e4__jinx__embeddings__crawler.py\\a9e6714c41da3fb59e166e8ca4403e5e3828fff95c1f815c5f8e817193e47826.json", "terms": ["line", "time", "win_start", "await", "now", "_preroll_lines", "and", "asyncio", "continue", "for", "path", "sandbox", "sleep", "source", "true", "while", "_preroll_max_bytes", "_read_tail_lines", "_sandbox_max_lps", "seek_end", "apply", "before", "break", "bucket", "callback"], "text_preview": "# If deleted later, re-create\n        while True:\n            await asyncio.sleep(0.5)\n            try:\n                f = open(path, \"r\", encoding=\"utf-8\", errors=\"ignore\")\n                break\n            except FileNotFoundError:\n                conti", "line_start": 74, "line_end": 104}, {"sha": "ae285b7fed2bcf99b0d57f84f5bff65cc3a5c33ceaf8b5798534c6922eec7ea3", "index": 3, "path": "736eb1e4__jinx__embeddings__crawler.py\\ae285b7fed2bcf99b0d57f84f5bff65cc3a5c33ceaf8b5798534c6922eec7ea3.json", "terms": ["str", "entries", "processed", "tailed", "try", "sandbox_dir", "line", "set", "async", "asyncio", "continue", "def", "dict", "except", "filenotfounderror", "for", "int", "none", "path", "source", "tasks", "_sandbox_max_lps", "_tail_file", "_watch_sandbox", "create_task"], "text_preview": "processed = 0\n                    if processed >= _SANDBOX_MAX_LPS:\n                        # Drop extra lines in the current 1s window\n                        continue\n                    processed += 1\n                await cb(line, source, \"line\")\n\n\nasy", "line_start": 105, "line_end": 140}, {"sha": "1ae529ede099ed863416e0a6c04afd06a2be2c49e0ff03fa6b6b00f635b908ae", "index": 4, "path": "736eb1e4__jinx__embeddings__crawler.py\\1ae529ede099ed863416e0a6c04afd06a2be2c49e0ff03fa6b6b00f635b908ae.json", "terms": ["tasks", "known", "await", "for", "asyncio", "dead", "mtime", "values", "return_exceptions", "spawn_tail", "cancel", "discard", "done", "finally", "finished", "gather", "items", "none", "not", "pop", "reap", "sleep", "tailed", "true"], "text_preview": "if p not in known or known[p] != mtime:\n                    known[p] = mtime\n                    await spawn_tail(p)\n\n            # Reap finished\n            dead = [k for k, t in tasks.items() if t.done()]\n            for k in dead:\n                tasks.", "line_start": 141, "line_end": 155}], "file_terms": ["str", "line", "lines", "path", "asyncio", "await", "for", "tasks", "try", "int", "none", "sandbox", "def", "except", "import", "source", "true", "time", "async", "callback", "file", "from", "processed", "start", "max_bytes"]}