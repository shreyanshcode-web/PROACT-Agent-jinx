{"file_rel": "jinx\\micro\\embeddings\\pipeline.py", "file_sha256": "cfc67849021c581909b4b045f523f858b22d79b20230a2d00df671ae45582bfc", "updated_ts": 1760763310.967327, "total_chunks": 3, "chunks": [{"sha": "5fc9bd6f6b6cd8e0f4822672a5777382e63452782b2345574b84bf44c3ad63a4", "index": 0, "path": "38b305c9__jinx__micro__embeddings__pipeline.py\\5fc9bd6f6b6cd8e0f4822672a5777382e63452782b2345574b84bf44c3ad63a4.json", "terms": ["import", "text", "from", "str", "deque", "source", "any", "dict", "raw", "reason", "return", "skipped", "true", "_recent_max", "embed_root", "ensure_dirs", "is_noise_text", "sha256_text", "strip_known_tags", "index", "cleaned", "embedding", "embeddings", "empty", "json"], "text_preview": "from __future__ import annotations\n\nimport asyncio\nimport json\nimport os\nfrom collections import deque\nfrom typing import Dict, Any, Deque, Iterable\n\nfrom .paths import EMBED_ROOT, ensure_dirs\nfrom .util import sha256_text, now_ts\nfrom .text_clean import s", "line_start": 1, "line_end": 38}, {"sha": "9cba2666f0f2298bf14cfd2999d1e3819f91757c7b4211b80b04e4993fad50e4", "index": 1, "path": "38b305c9__jinx__micro__embeddings__pipeline.py\\9cba2666f0f2298bf14cfd2999d1e3819f91757c7b4211b80b04e4993fad50e4.json", "terms": ["cached_obj", "content_id", "item_path", "source", "except", "exception", "none", "return", "true", "try", "_read_cached", "source_dir", "kind", "await", "cached", "json", "path", "_recent", "append_index", "exist_ok", "now_ts", "to_thread", "already", "also", "appendleft"], "text_preview": "os.makedirs(source_dir, exist_ok=True)\n\n    item_path = os.path.join(source_dir, f\"{content_id}.json\")\n    if os.path.exists(item_path):\n        # Already embedded; still record a touch in index\n        try:\n            def _read_cached() -> dict | None:\n ", "line_start": 39, "line_end": 70}, {"sha": "bf00418028d30eaf3dbf8acc7a8b770bc3eb6688dc8b3774b1d76881f7bb0371", "index": 2, "path": "38b305c9__jinx__micro__embeddings__pipeline.py\\bf00418028d30eaf3dbf8acc7a8b770bc3eb6688dc8b3774b1d76881f7bb0371.json", "terms": ["model", "source", "vec", "kind", "meta", "payload", "content_id", "recent", "await", "except", "exception", "text", "try", "_write_payload", "any", "def", "dict", "embedding", "none", "pass", "return", "str", "_recent", "append_index", "content_sha256"], "text_preview": "model = os.getenv(\"OPENAI_EMBEDDING_MODEL\", \"text-embedding-3-small\")\n    try:\n        vec = await embed_text_cached(text, model=model)\n    except Exception:\n        vec = []\n\n    meta: Dict[str, Any] = {\n        \"ts\": now_ts(),\n        \"model\": model,\n   ", "line_start": 71, "line_end": 117}], "file_terms": ["source", "text", "import", "return", "from", "content_id", "kind", "str", "dict", "except", "exception", "true", "try", "cached_obj", "model", "vec", "any", "await", "json", "none", "_recent", "item_path", "deque", "meta", "recent"]}