{"file_rel": "jinx\\micro\\llm\\prompt_compose.py", "file_sha256": "88811fcb29362d283a3f50842d7df92ca37938c6bace139835f1a391e88a8e58", "updated_ts": 1760763312.3015685, "total_chunks": 5, "chunks": [{"sha": "eb15fa580525b0288ae12f2545500cb8adcc50d99a4fd18d7f3b4c6ff338f749", "index": 0, "path": "113c3f5c__jinx__micro__llm__prompt_compose.py\\eb15fa580525b0288ae12f2545500cb8adcc50d99a4fd18d7f3b4c6ff338f749.json", "terms": ["import", "compile", "from", "anchors", "runtime", "str", "jinx", "micro", "datetime", "name", "env", "key", "paths", "questions", "symbols", "sys", "text", "var", "__future__", "_anchors_re", "_env_re", "_exp_re", "_pexp_re", "_run_re", "_sys_re"], "text_preview": "from __future__ import annotations\n\nimport os\nimport platform\nimport re\nimport sys\nfrom datetime import datetime\nfrom typing import List\nimport asyncio\n\nfrom jinx.micro.conversation.cont import load_last_anchors\nfrom jinx.micro.runtime.api import list_prog", "line_start": 1, "line_end": 31}, {"sha": "600f4d27536a46058db0db4c75d1f82196bd4ec1043317eea06b1ba772a92b5b", "index": 1, "path": "113c3f5c__jinx__micro__llm__prompt_compose.py\\600f4d27536a46058db0db4c75d1f82196bd4ec1043317eea06b1ba772a92b5b.json", "terms": ["out", "str", "return", "arr", "strip", "group", "name", "n_s", "anc", "def", "match", "none", "sub", "text", "_anch_sub", "_env_sub", "_var_sub", "epoch", "time", "current", "except", "exception", "key", "kind", "list"], "text_preview": "- {{sys:os|py|cwd}} -> platform system / python version / current working dir\n    - {{time:iso|epoch}} -> current time ISO8601 or seconds since epoch\n    - {{runtime:programs|programs_count}} -> active program IDs list (comma) or count\n    \"\"\"\n    if not t", "line_start": 32, "line_end": 76}, {"sha": "4f6b635ee6561ad0ef7d2b8005092cce4a54d3f3bd5dcfffe1aebd2223fc33b4", "index": 2, "path": "113c3f5c__jinx__micro__llm__prompt_compose.py\\4f6b635ee6561ad0ef7d2b8005092cce4a54d3f3bd5dcfffe1aebd2223fc33b4.json", "terms": ["return", "str", "out", "except", "exception", "try", "what", "def", "kind", "_sys_sub", "_time_sub", "has_prog", "one", "datetime", "group", "match", "now", "pids", "runtime", "sub", "system", "_run_re", "_runtime_expand", "_sys_re", "_time_re"], "text_preview": "# 4) System\n    def _sys_sub(m: re.Match) -> str:\n        what = m.group(1)\n        if what == \"os\":\n            return platform.system()\n        if what == \"py\":\n            return sys.version.split(\" \")[0]\n        if what == \"cwd\":\n            try:\n     ", "line_start": 77, "line_end": 119}, {"sha": "d35baf05f241993d156727210435a13b16335c21b9ef00c1790594adf703bfc8", "index": 3, "path": "113c3f5c__jinx__micro__llm__prompt_compose.py\\d35baf05f241993d156727210435a13b16335c21b9ef00c1790594adf703bfc8.json", "terms": ["str", "return", "pos", "text", "n_s", "search", "buf", "group", "tok", "_exp_re", "_run_sub", "has_exp", "key_name", "bool", "out", "append", "await", "def", "except", "exception", "exports", "none", "not", "pids", "try"], "text_preview": "def _run_sub(m: re.Match) -> str:\n            tok = m.group(1)\n            if tok == \"programs_count\":\n                return str(len(pids))\n            if tok == \"programs\":\n                return \", \".join(pids)\n            return \"\"\n        return _RUN_", "line_start": 120, "line_end": 155}, {"sha": "18ed49765eae4812fed7bd0a094f1e554dede31a85fab6e33b44e31b4b3e3c3b", "index": 4, "path": "113c3f5c__jinx__micro__llm__prompt_compose.py\\18ed49765eae4812fed7bd0a094f1e554dede31a85fab6e33b44e31b4b3e3c3b.json", "terms": ["buf", "pos", "append", "out", "join", "pid", "val", "program", "await", "end", "exk", "group", "return", "vals", "_export_expand", "_pexp_re", "get_program_export", "break", "except", "exception", "export", "key", "not", "search", "specific"], "text_preview": "vals = []\n            buf.append(\", \".join(vals))\n            pos = m.end()\n        s2 = \"\".join(buf)\n\n        # program-specific export: {{program:PID:key}}\n        pos = 0\n        buf = []\n        while True:\n            m = _PEXP_RE.search(s2, pos)\n    ", "line_start": 156, "line_end": 181}], "file_terms": ["return", "str", "out", "group", "import", "buf", "pos", "def", "except", "exception", "text", "try", "compile", "runtime", "n_s", "name", "append", "await", "from", "match", "not", "sub", "anchors", "program", "search"]}