{"file_rel": "jinx\\micro\\conversation\\memory_reasoner.py", "file_sha256": "37f0eb9dc77e8a702e6b466324dbf482107e548f4c5c58a0619a1d00d510e039", "updated_ts": 1760763310.3954585, "total_chunks": 5, "chunks": [{"sha": "3723b528db478e17590fd5e1e90fa50297ead59642168c8c02158d8fc23a5873", "index": 0, "path": "b8886290__jinx__micro__conversation__memory_reasoner.py\\3723b528db478e17590fd5e1e90fa50297ead59642168c8c02158d8fc23a5873.json", "terms": ["import", "from", "depth", "for", "jinx", "json", "none", "conversation", "frag", "micro", "build_memory_instructions", "start", "__future__", "_allowed", "_call_selector", "_fast_turn", "_json_candidates", "_json_obj_re", "_time", "call_selector_json", "detect_turn_query", "log_debug", "selector_core", "selector_memory", "selector_specs"], "text_preview": "from __future__ import annotations\n\nimport os\nimport json\nimport re\nfrom typing import Optional, Dict, Any\nimport time as _time\n\nfrom jinx.micro.conversation.turns_router import detect_turn_query as _fast_turn\nfrom jinx.micro.conversation.selector_core imp", "line_start": 1, "line_end": 39}, {"sha": "aaed52dea1cfd4b6abedf5c8413db7f09540965ac1fc8585059cf8b51b59267c", "index": 1, "path": "b8886290__jinx__micro__conversation__memory_reasoner.py\\aaed52dea1cfd4b6abedf5c8413db7f09540965ac1fc8585059cf8b51b59267c.json", "terms": ["str", "obj", "params", "get", "none", "action", "dict", "return", "not", "strip", "any", "kind", "start", "index", "conf", "def", "except", "exception", "for", "frag", "idx", "isinstance", "lower", "optional", "try"], "text_preview": "if depth == 0 and start is not None:\n                    yield s[start:i+1]\n                    start = None\n    # Fallback: non-greedy regex matches\n    for m in re.finditer(r\"\\{[\\s\\S]*?\\}\", s):\n        yield (m.group(0) or \"\").strip()\n\n\ndef _extract_json", "line_start": 40, "line_end": 75}, {"sha": "aec7ebe7b8b354d0b8c5ac41a55f6857add947dd585795b1ca764e816a67b4dd", "index": 2, "path": "b8886290__jinx__micro__conversation__memory_reasoner.py\\aec7ebe7b8b354d0b8c5ac41a55f6857add947dd585795b1ca764e816a67b4dd.json", "terms": ["kind", "params", "action", "int", "str", "index", "get", "optional", "none", "pair", "try", "confidence", "elif", "list", "llm", "max", "min", "query", "return", "selector", "text", "turn", "_fast_turn", "fast_turn", "infer_memory_action"], "text_preview": "q = str(params.get(\"query\", \"\"))\n        try:\n            k = int(params.get(\"k\", 6))\n        except Exception:\n            k = 6\n        k = max(1, min(16, k))\n        params = {\"query\": q, \"k\": k}\n    elif action == \"pins\":\n        params = {\"op\": \"list\"", "line_start": 76, "line_end": 108}, {"sha": "623c11090146176f9288d56e758d5bc5bcc99ec66ac39e700e93746a46720e5a", "index": 3, "path": "b8886290__jinx__micro__conversation__memory_reasoner.py\\623c11090146176f9288d56e758d5bc5bcc99ec66ac39e700e93746a46720e5a.json", "terms": ["getenv", "none", "allowed_list", "k_max_eff", "strip", "allowed", "not", "max_k", "except", "exception", "lower", "use", "allowed_env", "else", "for", "instr", "int", "memroute", "pins", "true", "try", "turn", "_call_selector_json", "build_memory_instructions", "include_examples"], "text_preview": "use = str(os.getenv(\"JINX_MEMORY_REASONER\", \"1\")).lower() not in (\"\", \"0\", \"false\", \"off\", \"no\")\n    except Exception:\n        use = True\n    if not use:\n        return None\n    # Programmatic prompt: respect caller/env-driven allowed actions and k bound\n ", "line_start": 109, "line_end": 135}, {"sha": "81fc5246afdc0a037e4f4a0575554be2ffd5346e90c430101823dc6e57612e07", "index": 4, "path": "b8886290__jinx__micro__conversation__memory_reasoner.py\\81fc5246afdc0a037e4f4a0575554be2ffd5346e90c430101823dc6e57612e07.json", "terms": ["__all__", "_extract_json", "_validate", "base_extra_kwargs", "cb_name", "default_model_env", "default_model_value", "infer_memory_action", "jinx_memsel", "jinx_memsel_llm_ms", "model_env", "openai_model", "openai_model_memory", "timeout_default_ms", "timeout_env", "gpt", "obj", "parse", "return", "temperature", "validate"], "text_preview": "parse=_extract_json,\n        validate=_validate,\n        model_env=\"OPENAI_MODEL_MEMORY\",\n        default_model_env=\"OPENAI_MODEL\",\n        default_model_value=\"gpt-5\",\n        timeout_env=\"JINX_MEMSEL_LLM_MS\",\n        timeout_default_ms=1100,\n        cb_n", "line_start": 136, "line_end": 149}], "file_terms": ["none", "params", "str", "kind", "action", "strip", "get", "import", "not", "return", "int", "obj", "for", "dict", "from", "try", "index", "optional", "depth", "except", "exception", "jinx", "lower", "turn", "any"]}