{"file_rel": "jinx\\micro\\embeddings\\project_stage_pyflow.py", "file_sha256": "3dce1f48c675fec6d3b26cb3606649d860a4a032a518a018e083fa00990e0864", "updated_ts": 1760763311.5684137, "total_chunks": 10, "chunks": [{"sha": "4c2bffa13b3fc3ab980467032581e1a6a0f498fc80287c723536bbb99fdeed2a", "index": 0, "path": "cab7e860__jinx__micro__embeddings__project_stage_pyflow.py\\4c2bffa13b3fc3ab980467032581e1a6a0f498fc80287c723536bbb99fdeed2a.json", "terms": ["import", "str", "for", "list", "exp", "from", "parts", "ast", "append", "out", "raw", "seen", "set", "and", "def", "extend", "len", "not", "split", "__future__", "_attr_chain", "_tokens_from_query", "exclude_dirs", "iter_candidate_files", "iter_project_chunks"], "text_preview": "from __future__ import annotations\n\nimport os\nimport ast\nimport time\nfrom typing import Any, Dict, List, Tuple\n\nfrom .project_config import ROOT, EXCLUDE_DIRS, MAX_FILE_BYTES\nfrom .project_iter import iter_candidate_files\nfrom .project_scan_store import it", "line_start": 1, "line_end": 41}, {"sha": "e2c35235552fe58e62413385e3eea37466959556fce843aa5ad5eb9eeaa3e7fe", "index": 1, "path": "cab7e860__jinx__micro__embeddings__project_stage_pyflow.py\\e2c35235552fe58e62413385e3eea37466959556fce843aa5ad5eb9eeaa3e7fe.json", "terms": ["ast", "chain", "cur", "out", "isinstance", "rel_path", "list", "names", "return", "str", "append", "attribute", "name", "get", "self", "def", "for", "include", "the", "_attr_chain", "_name_of_func", "_names_from_arg", "also", "and", "args"], "text_preview": "# Collect attribute chain parts: db.get -> [\"db\", \"get\"]\n    out: List[str] = []\n    cur = n\n    while isinstance(cur, ast.Attribute):\n        try:\n            out.append(str(cur.attr))\n        except Exception:\n            break\n        cur = cur.value  #", "line_start": 42, "line_end": 78}, {"sha": "22a3962a1601692b2e725539e676a3bdd118eac884a2c7949e205b05eb5e2f6b", "index": 2, "path": "cab7e860__jinx__micro__embeddings__project_stage_pyflow.py\\22a3962a1601692b2e725539e676a3bdd118eac884a2c7949e205b05eb5e2f6b.json", "terms": ["ast", "elt", "isinstance", "for", "list", "out", "str", "names", "elif", "extend", "_walk", "append", "def", "value", "_attr_chain", "generators", "lower", "name", "return", "try", "_flatten_targets", "_name_of_func", "_names_from_arg", "_names_from_genexp", "allow"], "text_preview": "out.extend(_attr_chain(a))\n    elif isinstance(a, ast.Constant) and isinstance(a.value, str):\n        # allow matching string literal arguments\n        out.append(str(a.value))\n    return [s.lower() for s in out if s]\n\n\ndef _flatten_targets(t: ast.AST) -> ", "line_start": 79, "line_end": 116}, {"sha": "f002ac7b5d97f247b3cd8ce7f25ab4f00863f4b341f09418f08dad44acf52eba", "index": 3, "path": "cab7e860__jinx__micro__embeddings__project_stage_pyflow.py\\f002ac7b5d97f247b3cd8ce7f25ab4f00863f4b341f09418f08dad44acf52eba.json", "terms": ["names", "comp", "iter", "str", "return", "for", "ast", "except", "exception", "extend", "isinstance", "out", "pass", "query", "seen", "int", "set", "append", "call", "elif", "list", "not", "try", "_attr_chain", "_flatten_targets"], "text_preview": "try:\n                names.extend(_flatten_targets(comp.target))\n            except Exception:\n                pass\n            try:\n                if isinstance(comp.iter, ast.Call):\n                    names.extend(_name_of_func(comp.iter.func))\n       ", "line_start": 117, "line_end": 150}, {"sha": "a96c6777a29fe9fd1132174da83327706eea90ebaf29dd770981b04f0027ca4f", "index": 4, "path": "cab7e860__jinx__micro__embeddings__project_stage_pyflow.py\\a96c6777a29fe9fd1132174da83327706eea90ebaf29dd770981b04f0027ca4f.json", "terms": ["return", "src", "str", "false", "not", "time_up", "ast", "def", "except", "exception", "try", "max_time_ms", "abs_p", "perf_counter", "q_toks", "int", "and", "any", "bool", "file", "float", "ignore", "list", "low", "none"], "text_preview": "if not q_toks:\n        return []\n\n    t0 = time.perf_counter()\n    hits: List[Tuple[float, str, Dict[str, Any]]] = []\n\n    def time_up() -> bool:\n        return max_time_ms is not None and (time.perf_counter() - t0) * 1000.0 > max_time_ms\n\n    # Helper to ", "line_start": 151, "line_end": 188}, {"sha": "aad44746002e698b7e13fb34adc4441671832ff34fc84893d491dadfd3ed1897", "index": 5, "path": "cab7e860__jinx__micro__embeddings__project_stage_pyflow.py\\aad44746002e698b7e13fb34adc4441671832ff34fc84893d491dadfd3ed1897.json", "terms": ["for", "val", "qset", "return", "score", "arg_names", "fn_names", "list", "split", "value", "_name_of_func", "_names_from_arg", "q_toks", "and", "args", "arguments", "ast", "bonus", "call", "check", "direct", "dotted", "except", "exception", "extend"], "text_preview": "return\n                val = node.value\n                if not isinstance(val, ast.Call):\n                    return\n                fn_names = _name_of_func(val.func)\n                arg_names: List[str] = []\n                try:\n                    for a", "line_start": 189, "line_end": 218}, {"sha": "7dc7a5e6e17d03094518888c5c4c093db2149656c4df5d5e4096780cd661f6dd", "index": 6, "path": "cab7e860__jinx__micro__embeddings__project_stage_pyflow.py\\7dc7a5e6e17d03094518888c5c4c093db2149656c4df5d5e4096780cd661f6dd.json", "terms": ["val", "ast", "extend", "names", "node", "score", "for", "assign", "call", "isinstance", "list", "self", "value", "_name_of_func", "_names_from_arg", "_names_from_genexp", "best_local", "generic_visit", "time_up", "visit_assign", "already", "append", "args", "but", "class"], "text_preview": "score += 0.5\n                # heuristic threshold\n                if score >= 1.5:\n                    ln = getattr(node, \"lineno\", 0) or 0\n                    if ln > 0:\n                        a = max(1, ln - 12)\n                        b = min(len(line", "line_start": 219, "line_end": 244}, {"sha": "44f94ede1d46f13e8222ab70692eaec47d764323d3b27e96a3564a300679d1f0", "index": 7, "path": "cab7e860__jinx__micro__embeddings__project_stage_pyflow.py\\44f94ede1d46f13e8222ab70692eaec47d764323d3b27e96a3564a300679d1f0.json", "terms": ["ast", "val", "names", "extend", "isinstance", "generators", "_names_from_arg", "fake_gen", "type", "comp", "elif", "elt", "except", "exception", "for", "key", "pass", "qset", "try", "value", "_flatten_targets", "_names_from_genexp", "q_toks", "and", "arg"], "text_preview": "elif isinstance(val, (ast.ListComp, ast.SetComp)):\n                    try:\n                        # Treat like generator: visit elt and generators\n                        fake_gen = ast.GeneratorExp(val.elt, val.generators)  # type: ignore[arg-type]\n    ", "line_start": 245, "line_end": 268}, {"sha": "ce6fce1fd823e245398a03ce192a6ef114ffd86b5232057c8778c232f08c8b2a", "index": 8, "path": "cab7e860__jinx__micro__embeddings__project_stage_pyflow.py\\ce6fce1fd823e245398a03ce192a6ef114ffd86b5232057c8778c232f08c8b2a.json", "terms": ["best_local", "for", "node", "score", "lines", "preview", "targets", "tgt", "tname", "_flatten_targets", "file_rel", "generic_visit", "line_end", "line_start", "rel_p", "text_preview", "append", "assignment", "embedding", "except", "exception", "file", "getattr", "hints", "include"], "text_preview": "# include assignment targets as strong hints\n                try:\n                    for tgt in node.targets:\n                        for tname in _flatten_targets(tgt):\n                            if tname in qset:\n                                score +", "line_start": 269, "line_end": 299}, {"sha": "bb5a2f34cf92db30dd2becbc84f0ba7208524a30cc5a2c49e442a01ada5bbdb3", "index": 9, "path": "cab7e860__jinx__micro__embeddings__project_stage_pyflow.py\\bb5a2f34cf92db30dd2becbc84f0ba7208524a30cc5a2c49e442a01ada5bbdb3.json", "terms": ["rel_p", "rel", "hits", "return", "abs_p", "rel_files", "seen_f", "for", "obj", "str", "exclude_dirs", "max_file_bytes", "_process_file", "get", "set", "append", "root", "__all__", "file_rel", "include_exts", "iter_candidate_files", "iter_project_chunks", "stage_pyflow_hits", "add", "and"], "text_preview": "hits.append((0.9935, rel_p, obj))\n            return len(hits) >= k\n        return False\n\n    # Scan embeddings-known files first\n    try:\n        rel_files: List[str] = []\n        seen_f: set[str] = set()\n        for fr, obj in iter_project_chunks():\n    ", "line_start": 300, "line_end": 330}], "file_terms": ["ast", "for", "str", "return", "names", "list", "isinstance", "val", "out", "extend", "append", "except", "exception", "try", "elt", "def", "score", "not", "and", "comp", "elif", "pass", "value", "import", "node"]}