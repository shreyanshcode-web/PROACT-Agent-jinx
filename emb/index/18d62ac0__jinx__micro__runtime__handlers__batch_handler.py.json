{"file_rel": "jinx\\micro\\runtime\\handlers\\batch_handler.py", "file_sha256": "a592e900005c4d480118c247109199b0e6670b1adc68a61d4b1754308e70354c", "updated_ts": 1760763313.0757468, "total_chunks": 7, "chunks": [{"sha": "672416157d5ce97a23af44b50271b1c88a8db47275e8c16d9cd257c405aefd0c", "index": 0, "path": "18d62ac0__jinx__micro__runtime__handlers__batch_handler.py\\672416157d5ce97a23af44b50271b1c88a8db47275e8c16d9cd257c405aefd0c.json", "terms": ["str", "ops", "from", "import", "list", "dict", "none", "any", "jinx", "micro", "runtime", "tid", "report_progress", "report_result", "get", "not", "await", "awaitable", "bool", "callable", "meta", "refactor", "try", "verifycb", "__future__"], "text_preview": "from __future__ import annotations\n\nimport os\nfrom typing import Any, Dict, List, Callable, Awaitable\n\nfrom jinx.micro.runtime.api import report_progress, report_result\nfrom jinx.micro.runtime.patch import (\n    AutoPatchArgs,\n    autopatch as _autopatch,\n", "line_start": 1, "line_end": 31}, {"sha": "2fedec5b2922648c4f292da091a9a45cda6481167f03f105f351c910c526408f", "index": 1, "path": "18d62ac0__jinx__micro__runtime__handlers__batch_handler.py\\2fedec5b2922648c4f292da091a9a45cda6481167f03f105f351c910c526408f.json", "terms": ["path", "diff", "get", "str", "typ", "max_span", "code", "append", "combined_diff_parts", "int", "previews", "type", "await", "elif", "list", "preview", "symbol", "true", "_patch_line", "_patch_write", "is_refactor", "jinx_patch_max_span", "line_end", "line_start", "any"], "text_preview": "is_refactor = False\n        previews: List[Dict[str, Any]] = []\n        combined_diff_parts: List[str] = []\n        for i, op in enumerate(ops):\n            typ = str(op.get(\"type\") or \"auto\").strip().lower()\n            path = str(op.get(\"path\") or \"\")\n  ", "line_start": 32, "line_end": 53}, {"sha": "c10da650b8fce15d910c7fedd9d3e1354cb93f277a8a97e173eb465094f4e096", "index": 2, "path": "18d62ac0__jinx__micro__runtime__handlers__batch_handler.py\\c10da650b8fce15d910c7fedd9d3e1354cb93f277a8a97e173eb465094f4e096.json", "terms": ["path", "none", "diff", "get", "anchor", "code", "line_end", "line_start", "append", "str", "symbol", "anc", "else", "preview", "true", "typ", "combined_diff_parts", "query", "await", "int", "not", "previews", "sym", "type", "_patch_anchor"], "text_preview": "ok, diff = await _patch_symbol(path, sym, code, preview=True)\n                previews.append({\"i\": i, \"type\": typ, \"ok\": ok, \"diff\": diff, \"path\": path, \"symbol\": sym})\n                combined_diff_parts.append(diff)\n            elif typ == \"anchor\":\n   ", "line_start": 54, "line_end": 71}, {"sha": "aeea95e65f1c8ca1f7bb857007cbbbb1564ab1b23921e1056912af9d78749ef9", "index": 3, "path": "18d62ac0__jinx__micro__runtime__handlers__batch_handler.py\\aeea95e65f1c8ca1f7bb857007cbbbb1564ab1b23921e1056912af9d78749ef9.json", "terms": ["path", "combined_diff", "batch", "diff", "get", "str", "max_span", "not", "previews", "await", "for", "combined_diff_parts", "none", "add", "append", "auto", "else", "exports", "list", "okc", "reason", "rem", "strat", "tid", "type"], "text_preview": "max_span=int(op.get(\"max_span\")) if op.get(\"max_span\") is not None else None,\n                )\n                ok, strat, diff = await _autopatch(a)\n                previews.append({\"i\": i, \"type\": f\"auto:{strat}\", \"ok\": ok, \"diff\": diff, \"path\": path})\n ", "line_start": 72, "line_end": 91}, {"sha": "deb02e69e4f645be2c11499535cea128220dd9a49aa9ce434c3f6eec515243a3", "index": 4, "path": "18d62ac0__jinx__micro__runtime__handlers__batch_handler.py\\deb02e69e4f645be2c11499535cea128220dd9a49aa9ce434c3f6eec515243a3.json", "terms": ["path", "diff", "typ", "code", "append", "max_span", "get", "int", "and", "await", "false", "preview", "results", "sym", "symbol", "type", "changed_files", "elif", "str", "_patch_line", "_patch_symbol", "_patch_write", "jinx_patch_max_span", "line_end", "line_start"], "text_preview": "code = str(op.get(\"code\") or \"\")\n            if typ == \"write\":\n                ok, diff = await _patch_write(path, code, preview=False)\n                results.append({\"i\": i, \"type\": typ, \"ok\": ok, \"diff\": diff, \"path\": path})\n                if ok and p", "line_start": 92, "line_end": 112}, {"sha": "b216ff7da0a4ca3709261f164e5e44d3cc5f954a5b8e5dbb2cc190bbca776411", "index": 5, "path": "18d62ac0__jinx__micro__runtime__handlers__batch_handler.py\\b216ff7da0a4ca3709261f164e5e44d3cc5f954a5b8e5dbb2cc190bbca776411.json", "terms": ["none", "get", "path", "anchor", "diff", "else", "str", "line_end", "line_start", "max_span", "code", "anc", "append", "int", "not", "changed_files", "query", "symbol", "await", "false", "preview", "typ", "_autopatch", "_patch_anchor", "and"], "text_preview": "changed_files.append(path)\n            elif typ == \"anchor\":\n                anc = str(op.get(\"anchor\") or \"\")\n                ok, diff = await _patch_anchor(path, anc, code, preview=False)\n                results.append({\"i\": i, \"type\": typ, \"ok\": ok, \"di", "line_start": 113, "line_end": 132}, {"sha": "c0f6f8a15f12e88e66be0ac405ac63b17d9148daec540a26385cba551450244c", "index": 6, "path": "18d62ac0__jinx__micro__runtime__handlers__batch_handler.py\\c0f6f8a15f12e88e66be0ac405ac63b17d9148daec540a26385cba551450244c.json", "terms": ["warnings", "for", "diff", "results", "await", "combined_commit", "except", "exception", "list", "warn", "changed_files", "report_result", "get", "path", "append", "combined", "commit", "exports", "files", "pass", "str", "tid", "try", "watchdog", "diff_add"], "text_preview": "results.append({\"i\": i, \"type\": f\"auto:{strat}\", \"ok\": ok, \"diff\": diff, \"path\": path})\n        # Compute watchdog warnings for changed files\n        warnings: List[str] = []\n        for p in list({p for p in changed_files if p}):\n            try:\n        ", "line_start": 133, "line_end": 155}], "file_terms": ["path", "diff", "get", "str", "none", "append", "await", "typ", "code", "max_span", "int", "list", "preview", "type", "for", "anchor", "not", "ops", "symbol", "else", "line_end", "line_start", "results", "false", "previews"]}