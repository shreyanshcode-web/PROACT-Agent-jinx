{"file_rel": "jinx\\micro\\io\\input.py", "file_sha256": "60572b8ddaba3d4c5a0bd3625d93f6c438f12f858bd3ccf09f6aad2f4f9dee0a", "updated_ts": 1760763311.9349825, "total_chunks": 6, "chunks": [{"sha": "07c83500e4bc8c7e7b23cf0e9150592acdb4df9624868085f2c8620debafeeba", "index": 0, "path": "429c1ae7__jinx__micro__io__input.py\\07c83500e4bc8c7e7b23cf0e9150592acdb4df9624868085f2c8620debafeeba.json", "terms": ["import", "from", "prompt_toolkit", "jinx", "queue", "asyncio", "input", "importlib", "user", "ensure_optional", "import_module", "and", "async", "into", "sanitized", "state", "str", "the", "__future__", "_ptk", "_ptk_keys", "async_utils", "blast_mem", "blue_whispers", "bomb_log"], "text_preview": "\"\"\"Interactive input micro-module.\n\nProvides an async prompt using prompt_toolkit and pushes sanitized user input\ninto an asyncio queue. Includes an inactivity watchdog that emits\n\"<no_response>\" after a configurable timeout to keep the agent responsive.\n\"", "line_start": 1, "line_end": 36}, {"sha": "5b140aa8187d1ba4d05f803895b0fdbc2ca04ebd44cf37897b5b419910cf8f21", "index": 1, "path": "429c1ae7__jinx__micro__io__input.py\\5b140aa8187d1ba4d05f803895b0fdbc2ca04ebd44cf37897b5b419910cf8f21.json", "terms": ["time", "activity", "asyncio", "boom_clock", "finger_wire", "get_running_loop", "keybindings", "promptsession", "triggerbit", "inactivity", "def", "either", "for", "getattr", "none", "now", "remaining", "the", "timeout", "timer", "_ptk", "_ptk_keys", "boom_limit", "current_buffer", "insert_text"], "text_preview": "PromptSession = getattr(_ptk, \"PromptSession\")\n    KeyBindings = getattr(_ptk_keys, \"KeyBindings\")\n\n    finger_wire = KeyBindings()\n    sess = PromptSession(key_bindings=finger_wire)\n    boom_clock: dict[str, float] = {\"time\": asyncio.get_running_loop().ti", "line_start": 37, "line_end": 63}, {"sha": "5391c091a69eb1ff79e57aa0cb31e46de2528f97b9e12c17f22a00ebdfe07f01", "index": 2, "path": "429c1ae7__jinx__micro__io__input.py\\5391c091a69eb1ff79e57aa0cb31e46de2528f97b9e12c17f22a00ebdfe07f01.json", "terms": ["asyncio", "none", "no_response", "await", "activity", "task", "bomb_log", "create_task", "time", "not", "placed", "queue", "remaining", "str", "timeout", "true", "try", "wait", "blast_mem", "blue_whispers", "boom_clock", "boom_limit", "get_running_loop", "kaboom_watch", "prompt_async"], "text_preview": "await asyncio.wait_for(activity.wait(), timeout=remaining)\n                # Activity occurred: loop to recalculate remaining\n                continue\n            except asyncio.TimeoutError:\n                # Timeout: no activity within boom_limit\n       ", "line_start": 64, "line_end": 84}, {"sha": "806ba9c7f28b1ff9746cbf414e7d1d1719202d979b400e2aa986eaad6665fc5b", "index": 3, "path": "429c1ae7__jinx__micro__io__input.py\\806ba9c7f28b1ff9746cbf414e7d1d1719202d979b400e2aa986eaad6665fc5b.json", "terms": ["asyncio", "any", "baseexception", "future", "exception", "task", "_swallow_task_exc", "cast", "done", "ensure", "except", "exit", "keyboardinterrupt", "pass", "result", "tasks", "try", "wait", "add_done_callback", "create_task", "first_completed", "jx_state", "prompt_task", "prompt_toolkit", "return_when"], "text_preview": "# Ensure any exception (including BaseException like KeyboardInterrupt) is retrieved\n                def _swallow_task_exc(t: asyncio.Task) -> None:\n                    try:\n                        # Using result() to also re-raise BaseException subclasses", "line_start": 85, "line_end": 103}, {"sha": "9cf9b79a5e9a98f6c8cabc52c1d1d6956837401c04b11f988dbdc5e4d3cd0a9f", "index": 4, "path": "429c1ae7__jinx__micro__io__input.py\\9cf9b79a5e9a98f6c8cabc52c1d1d6956837401c04b11f988dbdc5e4d3cd0a9f.json", "terms": ["await", "input", "prompt_task", "except", "bomb_log", "watch_task", "asyncio", "break", "cancel", "cancellederror", "contextlib", "for", "loop", "strip", "suppress", "with", "shutdown_task", "trigger_echoes", "baseexception", "both", "cancelled", "chaos", "clean", "cleanup", "cover"], "text_preview": "await pt\n                    break\n                # Got user input\n                st.cancel()\n                with contextlib.suppress(asyncio.CancelledError):\n                    await st\n                v: str = pt.result()\n                if v.strip()", "line_start": 104, "line_end": 131}, {"sha": "9dabb94603e3dbb5ba604f44a4ce6e808048ea9c0788032528dd92df465deb57", "index": 5, "path": "429c1ae7__jinx__micro__io__input.py\\9dabb94603e3dbb5ba604f44a4ce6e808048ea9c0788032528dd92df465deb57.json", "terms": ["st2", "not", "pt2", "any", "asyncio", "contextlib", "suppress", "with", "prompt_task", "shutdown_task", "app", "await", "cast", "done", "exception", "none", "task", "prompt_toolkit", "and", "baseexception", "cancel", "cancellederror", "close", "consume", "eoferror"], "text_preview": "# Force-close prompt_toolkit app and consume any leftover tasks\n        with contextlib.suppress(Exception):\n            sess.app.exit(exception=EOFError())\n        if prompt_task is not None:\n            pt2 = cast(asyncio.Task[Any], prompt_task)\n        ", "line_start": 132, "line_end": 145}], "file_terms": ["asyncio", "await", "import", "none", "time", "any", "activity", "prompt_toolkit", "input", "queue", "task", "prompt_task", "baseexception", "contextlib", "from", "not", "no_response", "except", "exception", "jinx", "str", "suppress", "the", "try", "with"]}