{"file_rel": "jinx\\micro\\embeddings\\snippet_segments.py", "file_sha256": "290fd774233748d92d3b9497df6790a99c4345aa9b087b292e133ee8645e51c9", "updated_ts": 1760763311.858266, "total_chunks": 6, "chunks": [{"sha": "c2a6135e75fad6ad6a1915b3b40f915df7484ac2b7ede8152e7880fdb0ad2239", "index": 0, "path": "badd5027__jinx__micro__embeddings__snippet_segments.py\\c2a6135e75fad6ad6a1915b3b40f915df7484ac2b7ede8152e7880fdb0ad2239.json", "terms": ["out", "import", "in_triple", "list", "append", "continue", "from", "str", "lines", "strip", "important_tags", "triple_pat", "tag", "for", "low", "not", "__future__", "_strip_comments_py", "codeish_tokens", "expand_strong_tokens", "extract_identifiers", "project_identifiers", "project_query_tokens", "and", "annotations"], "text_preview": "from __future__ import annotations\n\nfrom typing import List, Tuple\nimport re\n\nfrom .project_identifiers import extract_identifiers\nfrom .project_query_tokens import expand_strong_tokens, codeish_tokens\n\n\ndef _strip_comments_py(lines: List[str]) -> List[str", "line_start": 1, "line_end": 38}, {"sha": "7657cf5bbab036e4c0dcf249fbeb39412751b71a04f2c4c8d2946739fad9d44b", "index": 1, "path": "badd5027__jinx__micro__embeddings__snippet_segments.py\\7657cf5bbab036e4c0dcf249fbeb39412751b71a04f2c4c8d2946739fad9d44b.json", "terms": ["for", "found", "uniq", "max_windows", "list", "tok", "anchors", "len", "lines", "not", "low_lines", "int", "append", "seen", "ctrl_tokens", "str", "break", "dedupe", "enumerate", "lower", "return", "_collect_anchor_lines", "add", "allow", "any"], "text_preview": "def _collect_anchor_lines(lines: List[str], anchors: List[str], max_windows: int) -> List[int]:\n    # returns 1-indexed line numbers inside given lines\n    found: List[int] = []\n    if not anchors:\n        return found\n    low_lines = [ln.lower() for ln in", "line_start": 39, "line_end": 69}, {"sha": "aeb5781271e2bc74e8b585bd579707ee66f4ea733788f0e01b1548bc7fcdc038", "index": 2, "path": "badd5027__jinx__micro__embeddings__snippet_segments.py\\aeb5781271e2bc74e8b585bd579707ee66f4ea733788f0e01b1548bc7fcdc038.json", "terms": ["int", "out", "list", "around", "limit", "nlines", "str", "none", "break", "def", "for", "lines", "max", "points", "query", "return", "returns", "sorted", "tuple", "windows", "_merge_windows", "build_multi_segment_python", "extra_centers", "file_lines", "head_lines"], "text_preview": "break\n    return sorted(uniq)[: max_windows * 2]\n\n\ndef _merge_windows(points: List[int], around: int, nlines: int, limit: int) -> List[Tuple[int, int, int]]:\n    # Returns list of (start, end, center) windows within [1..nlines]\n    out: List[Tuple[int, int", "line_start": 70, "line_end": 111}, {"sha": "9e8eb5ab44b07515a7f49a6dcb87dc834e1dace9a83fdf05b23ff30710796fa4", "index": 3, "path": "badd5027__jinx__micro__embeddings__snippet_segments.py\\9e8eb5ab44b07515a7f49a6dcb87dc834e1dace9a83fdf05b23ff30710796fa4.json", "terms": ["work_scope", "anchors", "head", "list", "query", "max_items", "except", "exception", "extend", "max", "pass", "scope", "segments", "try", "e_idx", "file_lines", "s_idx", "strong", "tokens", "segment", "_collect_anchor_lines", "_strip_comments_py", "codeish_tokens", "expand_strong_tokens", "extract_identifiers"], "text_preview": "Keeps within per_hit_chars budget.\n    \"\"\"\n    s_idx = max(1, scope_start) - 1\n    e_idx = min(len(file_lines), scope_end) - 1\n    scope = file_lines[s_idx : e_idx + 1]\n\n    work_scope = list(scope)\n    if strip_comments:\n        work_scope = _strip_commen", "line_start": 112, "line_end": 145}, {"sha": "d42b9ce49ea9b37c5e181a31e19fa400296686f80db4ecc6922f3a6d10751537", "index": 4, "path": "badd5027__jinx__micro__embeddings__snippet_segments.py\\d42b9ce49ea9b37c5e181a31e19fa400296686f80db4ecc6922f3a6d10751537.json", "terms": ["int", "max", "head_span", "tail_span", "work_scope", "_overlaps", "c_int", "filtered_mid", "len", "centers", "continue", "for", "tail_lines", "extra_centers", "mid_windows_list", "scope_start", "and", "append", "rel", "scope", "_merge_windows", "head_lines", "mid_around", "mid_windows", "scope_end"], "text_preview": "# Include extra centers (from other hits within same file) if they fall into this scope\n    if extra_centers:\n        for c in extra_centers:\n            try:\n                c_int = int(c)\n            except Exception:\n                continue\n           ", "line_start": 146, "line_end": 170}, {"sha": "59437d0b0bc8205cd2f4b80981a144fe8f53a2dae4f49bef331ff93135e0d726", "index": 5, "path": "badd5027__jinx__micro__embeddings__snippet_segments.py\\59437d0b0bc8205cd2f4b80981a144fe8f53a2dae4f49bef331ff93135e0d726.json", "terms": ["out", "segment", "else", "sep", "tail", "total", "join", "len", "append", "remain", "seg", "per_hit_chars", "add", "segments", "tail_lines", "work_scope", "max", "rstrip", "break", "budget", "compose", "fit", "for", "keep", "last"], "text_preview": "segment = work_scope[a - 1 : b]\n        segments.append(f\"# segment: mid @L{c}\\n\" + \"\\n\".join(segment).rstrip())\n\n    # Tail segment\n    if tail_lines > 0:\n        tail = work_scope[-tail_lines:]\n        if tail:\n            segments.append(\"# segment: tai", "line_start": 171, "line_end": 196}], "file_terms": ["int", "out", "list", "append", "for", "work_scope", "len", "max", "anchors", "str", "else", "lines", "not", "segment", "continue", "head", "tail", "found", "return", "scope", "segments", "max_windows", "around", "from", "query"]}