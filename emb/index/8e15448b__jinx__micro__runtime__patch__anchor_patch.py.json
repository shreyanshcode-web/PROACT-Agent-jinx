{"file_rel": "jinx\\micro\\runtime\\patch\\anchor_patch.py", "file_sha256": "f4090fbf970698570a940cb0554e251fb5a32e83a2772af59e8090d468e5f251", "updated_ts": 1760763313.2619169, "total_chunks": 3, "chunks": [{"sha": "f43d8d7fd2456e18abfa9817c70ce2d9c623b38bda14d534f8ca43d9b1de80c6", "index": 0, "path": "8e15448b__jinx__micro__runtime__patch__anchor_patch.py\\f43d8d7fd2456e18abfa9817c70ce2d9c623b38bda14d534f8ca43d9b1de80c6.json", "terms": ["import", "cur", "str", "anchor", "from", "replacement", "anchor_regex_enabled", "detect_eol", "has_trailing_newline", "read_text_raw", "bool", "indentation", "eol", "false", "first", "last", "lines", "match", "path", "tuple", "__future__", "anchor_last_enabled", "async_utils", "jinx_patch_anchor_last", "jinx_patch_anchor_regex"], "text_preview": "from __future__ import annotations\n\nimport re\nimport ast\nimport asyncio\nfrom typing import Tuple\n\nfrom jinx.async_utils.fs import read_text_raw, write_text\nfrom .utils import (\n    unified_diff,\n    detect_eol,\n    has_trailing_newline,\n    join_lines,\n   ", "line_start": 1, "line_end": 41}, {"sha": "034db7e74bc277fad5c4bb875479ebd86abc300ce5be54529a97bd48d1d49a27", "index": 1, "path": "8e15448b__jinx__micro__runtime__patch__anchor_patch.py\\034db7e74bc277fad5c4bb875479ebd86abc300ce5be54529a97bd48d1d49a27.json", "terms": ["return", "found", "line", "anchor", "first", "rep_lines", "take_last", "false", "idx", "last", "needle", "not", "_scan_regex", "_scan_substr", "to_thread", "asyncio", "await", "def", "else", "enumerate", "for", "int", "lines", "replacement", "anchor_last_enabled"], "text_preview": "take_last = anchor_last_enabled()\n    if not needle:\n        return False, \"empty anchor\"\n    if use_regex:\n        try:\n            rx = re.compile(needle)\n        except Exception as e:\n            return False, f\"bad anchor regex: {e}\"\n        def _scan", "line_start": 42, "line_end": 74}, {"sha": "1d3192f6ededa017862062408d2182075504d5c36067487a03c27ebe0f48a7e7", "index": 2, "path": "8e15448b__jinx__micro__runtime__patch__anchor_patch.py\\1d3192f6ededa017862062408d2182075504d5c36067487a03c27ebe0f48a7e7.json", "terms": ["path", "rep_lines", "out", "idx", "lines", "return", "base_indent", "out_lines", "unified_diff", "await", "cur", "for", "syntax", "true", "join_lines", "leading_ws", "normalize_indentation", "syntax_check_enabled", "to_thread", "trailing_nl", "write_text", "and", "ast", "asyncio", "check"], "text_preview": "base_indent = leading_ws(lines[idx])\n    rep_lines = normalize_indentation(rep_lines)\n    rep_lines = [(base_indent + ln) if ln.strip() else ln for ln in rep_lines]\n    out_lines = lines[: idx + 1] + rep_lines + lines[idx + 1 :]\n    out = join_lines(out_li", "line_start": 75, "line_end": 89}], "file_terms": ["return", "rep_lines", "path", "anchor", "idx", "lines", "cur", "import", "line", "false", "first", "str", "found", "await", "last", "out", "replacement", "asyncio", "for", "from", "needle", "take_last", "to_thread", "unified_diff", "indentation"]}