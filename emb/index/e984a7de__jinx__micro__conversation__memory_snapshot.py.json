{"file_rel": "jinx\\micro\\conversation\\memory_snapshot.py", "file_sha256": "1f0b4383bfa51a69d1557de3863c40d7f7a2e8d7c4320234cd73f9742677600b", "updated_ts": 1760763310.4278715, "total_chunks": 4, "chunks": [{"sha": "22958fbf6fb942b9e33780cfb14b2f1247603c5463755656c0eca4c8f568654a", "index": 0, "path": "e984a7de__jinx__micro__conversation__memory_snapshot.py\\22958fbf6fb942b9e33780cfb14b2f1247603c5463755656c0eca4c8f568654a.json", "terms": ["path", "memory_dir", "import", "from", "join", "jinx", "read", "read_text_raw", "str", "async", "errors", "except", "exception", "for", "lock", "memory", "micro", "open", "pass", "shard", "sync", "topics", "try", "under", "with"], "text_preview": "from __future__ import annotations\n\nimport os\nfrom typing import List\n\nfrom jinx.state import shard_lock\nfrom jinx.async_utils.fs import read_text_raw\nfrom jinx.micro.memory.storage import memory_dir\nfrom jinx.micro.memory.pin_store import load_pins as _pi", "line_start": 1, "line_end": 33}, {"sha": "c0680f323fa0d4ebb71a0631027176c494f422ff3154575c410681e7656156ed", "index": 1, "path": "e984a7de__jinx__micro__conversation__memory_snapshot.py\\c0680f323fa0d4ebb71a0631027176c494f422ff3154575c410681e7656156ed.json", "terms": ["str", "pins", "int", "body", "return", "def", "name", "text", "head_lines", "head", "lines", "parts", "_add_channel", "and", "append", "channels", "join", "label", "path", "paths", "_ch_paths", "_clamp", "_pins_load", "_read_file", "_topic_head"], "text_preview": "return \"\"\n\n\ndef _clamp(s: str, n: int) -> str:\n    if n <= 0 or len(s) <= n:\n        return s\n    i = s.rfind(\"\\n\", 0, n)\n    return s[: i if i > 0 and i > n * 7 // 10 else n]\n\n\ndef _topic_head(name: str, text: str, head_lines: int) -> str:\n    if not text", "line_start": 34, "line_end": 77}, {"sha": "6a66461c0497fbd3cd72af53a9ad1088a6d9d7a7e27d4b9abaca286837551db9", "index": 2, "path": "e984a7de__jinx__micro__conversation__memory_snapshot.py\\6a66461c0497fbd3cd72af53a9ad1088a6d9d7a7e27d4b9abaca286837551db9.json", "terms": ["obj", "text", "files", "_add_channel", "get", "name", "for", "path", "raw", "str", "try", "_json", "_open_buffers", "_read_file", "_topics_dir", "out_lines", "append", "continue", "except", "exception", "line", "list", "snip", "txt", "_ch_decs"], "text_preview": "_add_channel(\"symbols\", _CH_SYMBOLS)\n    _add_channel(\"prefs\", _CH_PREFS)\n    _add_channel(\"decisions\", _CH_DECS)\n\n    # TOPICS (list a few files, show head lines)\n    try:\n        files = [fn for fn in os.listdir(_TOPICS_DIR) if fn.endswith(\".md\")]\n    ex", "line_start": 78, "line_end": 109}, {"sha": "1e72fd78d9d9fe15de113266d6684512f758841dbb7d9750045fb649fc846ec1", "index": 3, "path": "e984a7de__jinx__micro__conversation__memory_snapshot.py\\1e72fd78d9d9fe15de113266d6684512f758841dbb7d9750045fb649fc846ec1.json", "terms": ["body", "max_chars", "out_lines", "join", "parts", "__all__", "_clamp", "build_memory_snapshot", "open_buffers", "and", "append", "except", "exception", "len", "pass", "return", "strip"], "text_preview": "if out_lines:\n                    parts.append(\"[OPEN_BUFFERS]\\n\" + \"\\n\".join(out_lines[:12]))\n    except Exception:\n        pass\n\n    body = \"\\n\\n\".join(parts).strip()\n    if max_chars > 0 and len(body) > max_chars:\n        body = _clamp(body, max_chars)\n", "line_start": 110, "line_end": 121}], "file_terms": ["path", "str", "join", "body", "text", "import", "memory_dir", "name", "pins", "return", "except", "exception", "from", "parts", "try", "_add_channel", "int", "append", "def", "for", "max_chars", "_read_file", "head_lines", "out_lines", "obj"]}