{"file_rel": "jinx\\micro\\runtime\\handlers\\dump_handler.py", "file_sha256": "8705c6149e9bfdda25166b37a42f68fa46c18a0420f35a00f3443856c9ce4677", "updated_ts": 1760763313.0789883, "total_chunks": 6, "chunks": [{"sha": "0088baf5c2c3e8e04272a6b8e8880a5fc4e80012bc07c4596f824e01639e47c7", "index": 0, "path": "ddc221dc__jinx__micro__runtime__handlers__dump_handler.py\\0088baf5c2c3e8e04272a6b8e8880a5fc4e80012bc07c4596f824e01639e47c7.json", "terms": ["str", "import", "from", "jinx", "micro", "return", "runtime", "path", "project_root", "none", "awaitable", "base", "callable", "def", "default", "embeddings", "list", "name", "not", "__future__", "_abs_path", "_patch_write", "_should_autocommit", "_truthy", "extract_symbol_source"], "text_preview": "from __future__ import annotations\n\nimport os\nfrom typing import Callable, Awaitable, List, Dict, Optional\n\nfrom jinx.micro.runtime.api import report_progress, report_result\nfrom jinx.micro.runtime.patch import (\n    patch_write as _patch_write,\n    should", "line_start": 1, "line_end": 37}, {"sha": "e5fbbaf47988b3d1d7d50bc7196ce16e793d5925ac4b2af6991e20059f0be396", "index": 1, "path": "ddc221dc__jinx__micro__runtime__handlers__dump_handler.py\\e5fbbaf47988b3d1d7d50bc7196ce16e793d5925ac4b2af6991e20059f0be396.json", "terms": ["str", "out_path", "diff", "await", "false", "tid", "force_dump", "exports", "strategy", "not", "code", "preview", "reason", "_patch_write", "needs_confirmation", "ok_commit", "ok_prev", "report_progress", "report_result", "dump", "error", "okc", "return", "write", "_should_autocommit"], "text_preview": "async def _write_with_gate(tid: str, out_path: str, code: str, *, verify_cb: VerifyCB, exports: Dict[str, str], strategy: str) -> None:\n    await report_progress(tid, 35.0, f\"preview write {out_path}\")\n    ok_prev, diff = await _patch_write(out_path, code,", "line_start": 38, "line_end": 60}, {"sha": "ed063a0613101f73223a52235615cedc5fc292bfc4af3306be72d0081ce4e4fe", "index": 2, "path": "ddc221dc__jinx__micro__runtime__handlers__dump_handler.py\\ed063a0613101f73223a52235615cedc5fc292bfc4af3306be72d0081ce4e4fe.json", "terms": ["str", "warn", "await", "diff2", "out_path", "else", "exports", "none", "tid", "include_decorators", "include_docstring", "_truthy", "report_result", "verify_cb", "bool", "diff", "not", "optional", "symbol", "handle_dump_symbol", "inc_deco", "inc_doc", "jinx_dump_include_decorators", "jinx_dump_include_docstring", "last_patch_commit"], "text_preview": "warn = await maybe_warn_filesize(out_path)\n        exports[\"last_patch_commit\"] = diff2 or \"\"\n        exports[\"last_patch_strategy\"] = strategy\n        if warn:\n            exports[\"last_watchdog_warn\"] = warn\n        await report_result(\n            tid,\n", "line_start": 61, "line_end": 90}, {"sha": "daf26fb0526e5ba533a6b32e8235bb2bd45f36314ef8bf1ac7d6dc5e15928713", "index": 3, "path": "ddc221dc__jinx__micro__runtime__handlers__dump_handler.py\\daf26fb0526e5ba533a6b32e8235bb2bd45f36314ef8bf1ac7d6dc5e15928713.json", "terms": ["str", "await", "symbol", "tid", "error", "report_result", "false", "not", "query", "verify_cb", "src_path", "exports", "data", "get", "dump_symbol", "include_decorators", "include_docstring", "ok_loc", "out_path", "apath", "bool", "code", "failed", "meta", "optional"], "text_preview": "ok, code, meta = await extract_symbol_source(src_path, symbol, include_decorators=inc_deco, include_docstring=inc_doc)\n        if not ok:\n            await report_result(tid, False, error=str(meta.get(\"error\") or \"extract failed\"))\n            return\n     ", "line_start": 91, "line_end": 120}, {"sha": "c156196e153babcceb5cc5564c034e78af4538f74a0567efe6a8a04e77c580da", "index": 4, "path": "ddc221dc__jinx__micro__runtime__handlers__dump_handler.py\\c156196e153babcceb5cc5564c034e78af4538f74a0567efe6a8a04e77c580da.json", "terms": ["str", "await", "hits", "tid", "query", "include_decorators", "include_docstring", "verify_cb", "exports", "topk", "for", "not", "optional", "rel", "out_path", "report_result", "src_path", "bool", "error", "false", "int", "none", "return", "symbol", "_abs_path"], "text_preview": "return\n        await handle_dump_symbol(\n            tid,\n            src_path,\n            symbol,\n            out_path,\n            include_decorators=include_decorators,\n            include_docstring=include_docstring,\n            verify_cb=verify_cb,\n ", "line_start": 121, "line_end": 159}, {"sha": "97baf2fb13a734dbf187b28f4c2b03f9b0915ec5a4e347608bfbd7a689e136a1", "index": 5, "path": "ddc221dc__jinx__micro__runtime__handlers__dump_handler.py\\97baf2fb13a734dbf187b28f4c2b03f9b0915ec5a4e347608bfbd7a689e136a1.json", "terms": ["symbol", "await", "tid", "include_decorators", "include_docstring", "verify_cb", "ok_loc", "report_result", "src_path", "exports", "continue", "data", "error", "false", "not", "dump_by_query_global", "find_enclosing_symbol", "handle_dump_symbol", "out_path", "except", "exception", "failed", "found", "get", "hits"], "text_preview": "ok_loc, data = await find_enclosing_symbol(src_path, query)\n            if not ok_loc:\n                continue\n            symbol = str(data.get(\"symbol\") or \"\")\n            if not symbol:\n                continue\n            await handle_dump_symbol(\n   ", "line_start": 160, "line_end": 179}], "file_terms": ["str", "await", "tid", "out_path", "exports", "symbol", "not", "false", "report_result", "error", "verify_cb", "return", "include_decorators", "include_docstring", "none", "import", "query", "src_path", "diff", "from", "optional", "bool", "report_progress", "code", "def"]}