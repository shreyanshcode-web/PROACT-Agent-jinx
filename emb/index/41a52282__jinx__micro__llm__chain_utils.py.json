{"file_rel": "jinx\\micro\\llm\\chain_utils.py", "file_sha256": "7111c19e97cde8838efbddbf0913335b4b6ac978e33ecf7e9a918b67bd1ea134", "updated_ts": 1760763312.15439, "total_chunks": 6, "chunks": [{"sha": "7de8fd7aa8ebb490436a45eced8b343b400d74613b2b2cc092d31812713fcae0", "index": 0, "path": "41a52282__jinx__micro__llm__chain_utils.py\\7de8fd7aa8ebb490436a45eced8b343b400d74613b2b2cc092d31812713fcae0.json", "terms": ["str", "key", "block", "return", "text", "start_tag", "plan", "not", "def", "from", "import", "end_tag", "advice", "advisory", "any", "default", "dict", "find", "len", "name", "optional", "__future__", "extract_tagged_block", "machine_", "parse_planner_block"], "text_preview": "from __future__ import annotations\n\nimport os\nfrom typing import Any, Dict, List\n\n\ndef truthy_env(name: str, default: str = \"0\") -> bool:\n    v = os.getenv(name, default)\n    return str(v).lower() not in (\"\", \"0\", \"false\", \"off\", \"no\")\n\n\ndef extract_tagged", "line_start": 1, "line_end": 39}, {"sha": "0f033cda7b5a015f82dc56c003219f93ecfe40034e99668af286e8ae35f5149b", "index": 1, "path": "41a52282__jinx__micro__llm__chain_utils.py\\0f033cda7b5a015f82dc56c003219f93ecfe40034e99668af286e8ae35f5149b.json", "terms": ["str", "int", "_lim", "list", "except", "exception", "getenv", "max", "try", "dict", "default", "max_plan", "max_risks", "max_subs", "limits", "name", "return", "advice_avoid", "advice_do", "jinx_chained_max_advice", "jinx_chained_max_assume", "jinx_chained_max_clarify", "jinx_chained_max_context", "jinx_chained_max_remind", "jinx_chained_max_risks"], "text_preview": "# Env-tunable limits (counts only; lengths are free-form)\n    try:\n        max_plan = max(1, int(os.getenv(\"JINX_CHAINED_MAX_STEPS\", \"3\")))\n    except Exception:\n        max_plan = 3\n    try:\n        max_subs = max(0, int(os.getenv(\"JINX_CHAINED_MAX_SUBS\",", "line_start": 40, "line_end": 74}, {"sha": "b278f832e72e3be18ff7dfc7a849710e7fa39baac2a8394aed76feb59e861fc1", "index": 2, "path": "41a52282__jinx__micro__llm__chain_utils.py\\b278f832e72e3be18ff7dfc7a849710e7fa39baac2a8394aed76feb59e861fc1.json", "terms": ["continue", "not", "field", "and", "cortex", "line", "startswith", "append", "goal", "len", "note", "strip", "advice_do", "list", "raw", "risks", "split", "str", "subs", "max_adv", "max_risks", "max_subs", "advice", "advisory", "assumptions"], "text_preview": "assumptions: List[str] = []\n    contexts: List[str] = []\n    for raw in (body or \"\").splitlines():\n        line = raw.strip()\n        if not line:\n            continue\n        # key: value\n        if \":\" not in line:\n            continue\n        k, v = lin", "line_start": 75, "line_end": 112}, {"sha": "759fa7585dde611581c634f3ff5874d41c9b1c0538e5dfb8e57f83555c06f338", "index": 3, "path": "41a52282__jinx__micro__llm__chain_utils.py\\759fa7585dde611581c634f3ff5874d41c9b1c0538e5dfb8e57f83555c06f338.json", "terms": ["continue", "startswith", "and", "append", "len", "field", "idx", "advice_avoid", "idx_s", "assumptions", "clarifiers", "contexts", "plan", "reminders", "max_adv", "max_asm", "max_clr", "max_ctx", "max_plan", "max_rem", "plan_steps", "advice", "assume", "avoid", "bucket"], "text_preview": "continue\n        if k.startswith(\"advice.avoid.\"):\n            if len(advice_avoid) < max_adv and v:\n                advice_avoid.append(v)\n            continue\n        if k.startswith(\"clarify.\"):\n            if len(clarifiers) < max_clr and v:\n          ", "line_start": 113, "line_end": 144}, {"sha": "9b7349808b56bb0eaf5c5f313ebfeed92c603a9130ff82b44b605a201a16024f", "index": 4, "path": "41a52282__jinx__micro__llm__chain_utils.py\\9b7349808b56bb0eaf5c5f313ebfeed92c603a9130ff82b44b605a201a16024f.json", "terms": ["field", "bucket", "str", "plan_out", "criteria", "step", "why", "dict", "get", "advice_avoid", "advice_do", "plan_steps", "assumptions", "clarifiers", "cortex", "goal", "note", "reminders", "risks", "advisory", "any", "body", "elif", "plan", "max_plan"], "text_preview": "if field in bucket and not bucket[field]:\n                if field == \"criteria\":\n                    bucket[field] = v\n                elif field == \"why\":\n                    bucket[field] = v\n                elif field == \"step\":\n                    buc", "line_start": 145, "line_end": 181}, {"sha": "53773f472619c819ca1328ba7f5d31ddcc263d5c3fb6e94b850b704a8eb29ea8", "index": 5, "path": "41a52282__jinx__micro__llm__chain_utils.py\\53773f472619c819ca1328ba7f5d31ddcc263d5c3fb6e94b850b704a8eb29ea8.json", "terms": ["summary", "items", "and", "advisory", "line", "str", "mode", "not", "res", "strip", "next_actions", "append", "continue", "len", "next", "nudge", "raw", "startswith", "any", "body", "dict", "directive", "else", "for", "list"], "text_preview": "Recognizes:\n      - summary: <...>\n      - nudge.N: <...> (advisory mode)\n      - next.N: <...> (directive mode)\n    Returns {\"summary\": str, \"next_actions\": [str, ...], optional \"mode\": \"advisory\"}.\n    \"\"\"\n    summary = \"\"\n    items: List[str] = []\n    f", "line_start": 182, "line_end": 209}], "file_terms": ["str", "continue", "field", "and", "not", "len", "startswith", "advisory", "append", "list", "dict", "line", "return", "summary", "cortex", "key", "int", "strip", "plan", "block", "goal", "note", "_lim", "bucket", "items"]}