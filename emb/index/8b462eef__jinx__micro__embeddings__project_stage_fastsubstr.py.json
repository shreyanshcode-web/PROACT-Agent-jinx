{"file_rel": "jinx\\micro\\embeddings\\project_stage_fastsubstr.py", "file_sha256": "9d22f245dd1da5fe7b5656f5ee93c86a1d25e7076382f9648be317772851b5bb", "updated_ts": 1760763311.3516755, "total_chunks": 6, "chunks": [{"sha": "bcd764b698691bd37a1a0cce544986b1bbdef8d738d49f9116aed8205db87904", "index": 0, "path": "8b462eef__jinx__micro__embeddings__project_stage_fastsubstr.py\\bcd764b698691bd37a1a0cce544986b1bbdef8d738d49f9116aed8205db87904.json", "terms": ["import", "str", "from", "toks", "for", "list", "def", "seen", "uniq", "codeish_tokens", "expand_strong_tokens", "toks2", "set", "and", "append", "bad", "len", "limit", "lower", "not", "return", "tokens", "try", "__future__", "_anchors"], "text_preview": "from __future__ import annotations\n\nimport os\nimport time\nfrom typing import Any, Dict, List, Tuple\n\nfrom .project_config import ROOT, EXCLUDE_DIRS, MAX_FILE_BYTES\nfrom .project_iter import iter_candidate_files\nfrom .project_scan_store import iter_project_", "line_start": 1, "line_end": 37}, {"sha": "e389191c034f535efb614310268511656ac2a94f4104c5ab93d66e11c89edd5c", "index": 1, "path": "8b462eef__jinx__micro__embeddings__project_stage_fastsubstr.py\\e389191c034f535efb614310268511656ac2a94f4104c5ab93d66e11c89edd5c.json", "terms": ["return", "frag", "_ast", "strip", "best", "cands", "except", "exception", "len", "best_len", "group", "mode", "none", "parse", "true", "try", "_can", "_re", "eval", "false", "for", "longest", "pass", "and", "ast"], "text_preview": "import re as _re, ast as _ast\n        cands = list(_re.finditer(r\"[A-Za-z0-9_\\./:\\-+*<>=!\\\"'\\[\\]\\(\\)\\{\\),\\s]+\", q or \"\"))\n        def _can(s: str) -> bool:\n            s = (s or \"\").strip()\n            if len(s) < 3:\n                return False\n          ", "line_start": 38, "line_end": 72}, {"sha": "0f2ebc20aabe4702dd708f5e194fd8ef1d2d48f583bd0eff1e396094cee57dc1", "index": 2, "path": "8b462eef__jinx__micro__embeddings__project_stage_fastsubstr.py\\0f2ebc20aabe4702dd708f5e194fd8ef1d2d48f583bd0eff1e396094cee57dc1.json", "terms": ["str", "core", "return", "max_time_ms", "def", "not", "text", "try", "abs_p", "perf_counter", "time_up", "int", "and", "any", "bool", "dict", "false", "float", "ignore", "list", "none", "query", "regex", "time", "tuple"], "text_preview": "def stage_fastsubstr_hits(query: str, k: int, *, max_time_ms: int | None = 150) -> List[Tuple[float, str, Dict[str, Any]]]:\n    \"\"\"Stage: fast substring-based hit using code-core or anchor tokens.\n\n    Extremely cheap and robust line-window retrieval when ", "line_start": 73, "line_end": 106}, {"sha": "7850a1d28d93b37c036b015c807fec081f3aef75ee14d7b63ed603a2d10c1282", "index": 3, "path": "8b462eef__jinx__micro__embeddings__project_stage_fastsubstr.py\\7850a1d28d93b37c036b015c807fec081f3aef75ee14d7b63ed603a2d10c1282.json", "terms": ["_rx", "text", "core", "pos0", "lines", "snip", "pos1", "rel_p", "count", "hits", "len", "max", "obj", "pat", "pre", "strip", "file_rel", "line_end", "line_start", "text_preview", "and", "append", "bestmatch", "compile", "dotall"], "text_preview": "pat = _rx.compile(f\"({_rx.escape(core)}){{e<={err}}}\", _rx.BESTMATCH | _rx.IGNORECASE | _rx.DOTALL)\n                mm = pat.search(text)\n                if mm:\n                    pos0, pos1 = mm.start(), mm.end()\n                    pre = text[:pos0]\n   ", "line_start": 107, "line_end": 134}, {"sha": "c6738b726884f951725c3cefbadf60c5d6eade2be8ba96262b18f2638f80c827", "index": 4, "path": "8b462eef__jinx__micro__embeddings__project_stage_fastsubstr.py\\c6738b726884f951725c3cefbadf60c5d6eade2be8ba96262b18f2638f80c827.json", "terms": ["low", "len", "pos0", "pre", "present", "anchors", "count", "lines", "lower", "rel_p", "core", "else", "false", "find", "first", "hits", "max", "need", "obj", "return", "snip", "strip", "text", "file_rel", "line_end"], "text_preview": "pos0 = low.find(core.lower())\n            pre = low[:pos0]\n            ls = pre.count(\"\\n\") + 1\n            le = ls + max(1, low[pos0:pos0+len(core)].count(\"\\n\"))\n        else:\n            # Require multiple anchors when available to avoid word-only false ", "line_start": 135, "line_end": 168}, {"sha": "975e1c18b2a80700fa31901b26fc44443cd4979139d0b87f02465542baa8f823", "index": 5, "path": "8b462eef__jinx__micro__embeddings__project_stage_fastsubstr.py\\975e1c18b2a80700fa31901b26fc44443cd4979139d0b87f02465542baa8f823.json", "terms": ["rel", "rel_files", "for", "hits", "return", "seen", "str", "exclude_dirs", "max_file_bytes", "get", "set", "obj", "process", "root", "__all__", "file_rel", "include_exts", "iter_candidate_files", "iter_project_chunks", "stage_fastsubstr_hits", "add", "and", "append", "except", "exception"], "text_preview": "seen: set[str] = set()\n        rel_files: List[str] = []\n        for fr, obj in iter_project_chunks():\n            rel = fr or str((obj.get(\"meta\") or {}).get(\"file_rel\") or \"\")\n            if rel and rel not in seen:\n                seen.add(rel)\n        ", "line_start": 169, "line_end": 191}], "file_terms": ["return", "str", "len", "core", "for", "rel", "import", "text", "try", "strip", "hits", "list", "low", "pos0", "and", "def", "except", "exception", "lower", "_rx", "frag", "false", "from", "lines", "max"]}