{"file_rel": "jinx\\micro\\conversation\\memory_program.py", "file_sha256": "b80a20c3f49823b700f21e694f5a8e1eeacfb5c32e229125c67d0ba9b75cca3b", "updated_ts": 1760763310.3985717, "total_chunks": 6, "chunks": [{"sha": "92306918e73708a0391d831436fdda7355574832e1a85b4df26d8f74fd3cfcb2", "index": 0, "path": "e85e6e73__jinx__micro__conversation__memory_program.py\\92306918e73708a0391d831436fdda7355574832e1a85b4df26d8f74fd3cfcb2.json", "terms": ["import", "from", "depth", "jinx", "conversation", "frag", "json", "micro", "for", "list", "optional", "start", "__future__", "_allowed_actions", "_allowed_channels", "_allowed_pin_ops", "_call_selector", "_exec_ops", "_json_candidates", "_json_obj_re", "append_channel", "build_memory_program_instructions", "build_memory_snapshot", "call_selector_json", "exec_ops"], "text_preview": "from __future__ import annotations\n\nimport os\nimport json\nimport re\nfrom typing import Any, Dict, List, Optional\n\nfrom jinx.micro.conversation.selector_core import call_selector_json as _call_selector\nfrom jinx.prompts.selector_memory import build_memory_p", "line_start": 1, "line_end": 38}, {"sha": "7e787a2c6e5c8f4ba7d4b1dec9c509cd016e767800d2150cbb5e12816fba58bf", "index": 1, "path": "e85e6e73__jinx__micro__conversation__memory_program.py\\7e787a2c6e5c8f4ba7d4b1dec9c509cd016e767800d2150cbb5e12816fba58bf.json", "terms": ["str", "return", "dict", "none", "obj", "ops_in", "any", "lim", "not", "action", "int", "def", "for", "get", "raw", "start", "strip", "try", "max_ops", "params", "continue", "except", "exception", "frag", "isinstance"], "text_preview": "if depth == 0 and start is not None:\n                    yield s[start:i+1]\n                    start = None\n    # Fallback\n    for m in re.finditer(r\"\\{[\\s\\S]*?\\}\", s):\n        yield (m.group(0) or \"\").strip()\n\n\ndef _parse_json(s: str) -> Optional[Dict[st", "line_start": 39, "line_end": 78}, {"sha": "f4074d0610e4f70e962b6ad06d507eb75ea719cf827d8339eb9370a578243a66", "index": 2, "path": "e85e6e73__jinx__micro__conversation__memory_program.py\\f4074d0610e4f70e962b6ad06d507eb75ea719cf827d8339eb9370a578243a66.json", "terms": ["action", "params", "line", "get", "opx", "not", "str", "append", "continue", "kmax", "list", "out", "strip", "_clip_line", "kind", "elif", "lower", "query", "_allowed_pin_ops", "append_channel", "add", "dict", "else", "except", "exception"], "text_preview": "if not isinstance(params, dict):\n                continue\n            if action == \"memroute\":\n                q = str(params.get(\"query\") or \"\").strip()\n                try:\n                    k = int(params.get(\"k\") or kmax)\n                except Excep", "line_start": 79, "line_end": 103}, {"sha": "a2908a0accfbfa36cd350d3ced67b743c0ae5dadb7704dc97975d7a56573b4eb", "index": 3, "path": "e85e6e73__jinx__micro__conversation__memory_program.py\\a2908a0accfbfa36cd350d3ced67b743c0ae5dadb7704dc97975d7a56573b4eb.json", "terms": ["lines", "str", "mode", "params", "action", "append", "not", "name", "continue", "get", "out", "_clip_line", "kind", "return", "strip", "for", "ops", "_allowed_channels", "infer_memory_program", "jinx_mem_program", "write_topic", "and", "async", "blocks", "def"], "text_preview": "if kind not in _ALLOWED_CHANNELS:\n                    continue\n                lines = [ _clip_line(str(x), 400) for x in (params.get(\"lines\") or []) if str(x).strip()]\n                if not lines:\n                    continue\n                out.append({", "line_start": 104, "line_end": 129}, {"sha": "ad62da622d416c6492c214d9c58036f5a1ee59b6bee70895e736ad98a7cba376", "index": 4, "path": "e85e6e73__jinx__micro__conversation__memory_program.py\\ad62da622d416c6492c214d9c58036f5a1ee59b6bee70895e736ad98a7cba376.json", "terms": ["except", "exception", "getenv", "try", "snap_chars", "int", "snapshot", "allowed_env", "append_channel", "max_ops", "write_topic", "strip", "allowed", "build", "kmax", "lower", "memroute", "not", "pins", "build_memory_snapshot", "jinx_mem_program", "jinx_mem_program_allowed", "jinx_mem_program_max_k", "jinx_mem_program_max_ops", "jinx_mem_snapshot_chars"], "text_preview": "- Uses a compact snapshot of durable memory to ground planning.\n    - Strict RT via selector_core; circuit breaker under key JINX_MEMPROG.\n    \"\"\"\n    try:\n        on = str(os.getenv(\"JINX_MEM_PROGRAM\", \"1\")).lower() not in (\"\", \"0\", \"false\", \"off\", \"no\")\n", "line_start": 130, "line_end": 162}, {"sha": "e28688c0f5c6d707f73e401f021bd101ece630ca2ec13b0b48a718fe482acd67", "index": 5, "path": "e85e6e73__jinx__micro__conversation__memory_program.py\\e28688c0f5c6d707f73e401f021bd101ece630ca2ec13b0b48a718fe482acd67.json", "terms": ["ops", "str", "obj", "return", "max_ops", "dict", "any", "kmax", "not", "text", "_parse", "_validate", "input_json", "allowed", "snapshot", "await", "def", "instr", "optional", "parse", "validate", "__all__", "_call_selector_json", "_exec_ops", "_parse_json"], "text_preview": "instr = build_memory_program_instructions(allowed=allowed, max_ops=max_ops, max_k=kmax, include_examples=True)\n    input_json = json.dumps({\"text\": str(text or \"\"), \"snapshot\": snapshot}, ensure_ascii=False)\n\n    # Selector core: parse+validate\n    async d", "line_start": 163, "line_end": 195}], "file_terms": ["str", "not", "action", "params", "return", "get", "dict", "strip", "lines", "ops", "obj", "kmax", "continue", "except", "exception", "import", "try", "max_ops", "any", "int", "append", "for", "list", "out", "def"]}