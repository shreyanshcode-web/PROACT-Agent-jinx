{"file_rel": "jinx\\micro\\memory\\graph.py", "file_sha256": "79c0a199d847ea16dbcd337673a2b55a8f20cafc931d5ed221669559ee9f18b5", "updated_ts": 1760763312.4442594, "total_chunks": 10, "chunks": [{"sha": "8b3297a1f562bf66c5a12931a6065ef5c04536179fd33aa517b711c797ce315e", "index": 0, "path": "07dfc57c__jinx__micro__memory__graph.py\\8b3297a1f562bf66c5a12931a6065ef5c04536179fd33aa517b711c797ce315e.json", "terms": ["import", "return", "from", "def", "dict", "jinx", "json", "str", "memory_dir", "compile", "obj", "_graph_path", "_load_graph", "any", "edges", "error", "graph", "join", "micro", "note", "path", "state", "try", "user", "__future__"], "text_preview": "from __future__ import annotations\n\nimport json\nimport math\nimport os\nimport re\nimport time\nfrom typing import Any, Dict, List, Tuple\n\nfrom jinx.micro.memory.storage import memory_dir\nfrom jinx.micro.embeddings.project_identifiers import extract_identifier", "line_start": 1, "line_end": 41}, {"sha": "706f0d3ef06b4c00c124bd503a59af1c4ec8e219181b5a07cc1f224db3bd73f0", "index": 1, "path": "07dfc57c__jinx__micro__memory__graph.py\\706f0d3ef06b4c00c124bd503a59af1c4ec8e219181b5a07cc1f224db3bd73f0.json", "terms": ["str", "float", "out", "nodes", "dict", "except", "exception", "get", "return", "try", "def", "key", "ntype", "any", "continue", "for", "items", "json", "none", "_add_node", "_graph_path", "_load_graph", "_save_graph", "ensure_ascii", "exist_ok"], "text_preview": "out: Dict[str, float] = {}\n        for ek, ed in (g.get(\"edges\") or {}).items():\n            try:\n                out[str(ek)] = float((ed or {}).get(\"w\", 0.0))\n            except Exception:\n                continue\n        return out\n    except Exception:", "line_start": 42, "line_end": 81}, {"sha": "a50a73c5651b14eba13fb3b4992d93001195970addb9b8f98f0c84ceda1f9270", "index": 2, "path": "07dfc57c__jinx__micro__memory__graph.py\\a50a73c5651b14eba13fb3b4992d93001195970addb9b8f98f0c84ceda1f9270.json", "terms": ["str", "float", "line", "list", "edges", "strip", "def", "except", "exception", "get", "paths", "return", "_edge_key", "not", "append", "for", "lower", "syms", "tok", "try", "_add_edge", "_dialog_prefix_re", "_path_re", "_tokens_from_line", "extract_identifiers"], "text_preview": "nd[\"w\"] = float(nd.get(\"w\", 0.0)) + float(w)\n    except Exception:\n        nd[\"w\"] = float(w)\n    nodes[key] = nd\n\n\ndef _edge_key(a: str, b: str) -> str:\n    return a + \"||\" + b if a <= b else b + \"||\" + a\n\n\ndef _add_edge(g: Dict[str, Any], a: str, b: str,", "line_start": 82, "line_end": 121}, {"sha": "9b859664873e8534253bf17a53f2ee555443b023796bfe9162a6ff080caee65d", "index": 3, "path": "07dfc57c__jinx__micro__memory__graph.py\\9b859664873e8534253bf17a53f2ee555443b023796bfe9162a6ff080caee65d.json", "terms": ["min_interval", "and", "last", "none", "str", "time", "compact", "evergreen", "except", "exception", "int", "terms", "try", "half_days", "jinx_mem_graph_min_interval_ms", "adds", "decay", "getenv", "nodes", "now", "return", "stamp", "update", "_load_graph", "_stamp_path"], "text_preview": "pass\n    terms: List[str] = []\n    for m in _WORD_RE.finditer(line or \"\"):\n        t = (m.group(0) or \"\").strip().lower()\n        if t and len(t) >= 4:\n            if t not in _STOP_TERMS:\n                terms.append(t)\n    return paths, syms, terms\n\n\nasy", "line_start": 122, "line_end": 160}, {"sha": "39940d3dedc73ea2c657f551a0ffb271a1a7ec357f8cacf9761f97ce6b9f0b97", "index": 4, "path": "07dfc57c__jinx__micro__memory__graph.py\\39940d3dedc73ea2c657f551a0ffb271a1a7ec357f8cacf9761f97ce6b9f0b97.json", "terms": ["edges", "nodes", "get", "float", "last_ts", "new_edges", "new_nodes", "decay", "evergreen", "for", "half_days", "any", "dict", "except", "exception", "items", "line", "raw", "str", "try", "weight", "updated_ts", "abs", "absolute", "add"], "text_preview": "last_ts = int(g.get(\"updated_ts\") or 0)\n    if last_ts > 0 and half_days > 0:\n        decay = 0.5 ** (max(0.0, (now - last_ts) / 1000.0) / (half_days * 86400.0))\n        # nodes\n        nodes = g.get(\"nodes\") or {}\n        new_nodes: Dict[str, Any] = {}\n  ", "line_start": 161, "line_end": 194}, {"sha": "fb30d23e87ee1dc7e20a65b3e85bea18ed789ddd907a4a1f196a55775035885d", "index": 5, "path": "07dfc57c__jinx__micro__memory__graph.py\\fb30d23e87ee1dc7e20a65b3e85bea18ed789ddd907a4a1f196a55775035885d.json", "terms": ["str", "line", "low", "_add_node", "startswith", "tail", "corrected", "elif", "lpart", "rpart", "split", "strip", "and", "decision", "float", "list", "ltok", "parts", "path", "pref", "rtok", "symbol", "tuple", "_emit_inhib_from_line", "corrections"], "text_preview": "if low.startswith(\"path: \"):\n                _add_node(g, line, \"path\", 0.5)\n            elif low.startswith(\"symbol: \"):\n                _add_node(g, line, \"symbol\", 0.5)\n            elif low.startswith(\"pref: \"):\n                _add_node(g, line, \"pref\"", "line_start": 195, "line_end": 220}, {"sha": "ccf33256b2c4d396976d2c1a1d69e00b3c6493271b00d4b4d8ef50229fe4256d", "index": 6, "path": "07dfc57c__jinx__micro__memory__graph.py\\ccf33256b2c4d396976d2c1a1d69e00b3c6493271b00d4b4d8ef50229fe4256d.json", "terms": ["for", "term", "toks", "append", "nodes", "paths", "lines", "syms", "terms", "path", "symbol", "res", "_tokens_from_line", "str", "strip", "compact", "deprecated", "len", "range", "remove", "rename", "add", "among", "any", "bound"], "text_preview": "res.append((f\"term: {ltok}\", f\"term: {rtok}\", -1.0))\n            except Exception:\n                pass\n        # deprecated/rename/remove lines â€” add mild inhibitory among extracted symbols/paths\n        if any(k in low for k in (\"deprecated\", \"rename\", \"", "line_start": 221, "line_end": 245}, {"sha": "a0d38acbcfed6ece2dda3fd596a7028ffddc28bcadd7ad01cf3317e83b5dbdce", "index": 7, "path": "07dfc57c__jinx__micro__memory__graph.py\\a0d38acbcfed6ece2dda3fd596a7028ffddc28bcadd7ad01cf3317e83b5dbdce.json", "terms": ["for", "max_nodes", "items", "get", "keys", "_add_node", "max_edges", "len", "nodes", "try", "_add_edge", "abs", "edges", "except", "exception", "float", "getenv", "int", "key", "lambda", "range", "sorted", "split", "strip", "_emit_inhib_from_line"], "text_preview": "for k, t in nodes:\n            _add_node(g, k, t, 1.0)\n        # connect pairs\n        for i in range(len(keys)):\n            for j in range(i + 1, len(keys)):\n                _add_edge(g, keys[i], keys[j], 1.0)\n        # inhibitory edges from this line, i", "line_start": 246, "line_end": 274}, {"sha": "4a79b22d010d03d6faa7db150ec5b1a453c6fb7f79c04d55e125eb3284a1db46", "index": 8, "path": "07dfc57c__jinx__micro__memory__graph.py\\4a79b22d010d03d6faa7db150ec5b1a453c6fb7f79c04d55e125eb3284a1db46.json", "terms": ["get", "other", "str", "for", "edges", "nodes", "scores", "float", "cand", "keys", "not", "term", "max_edges", "else", "eitems", "except", "exception", "list", "lower", "matching", "node", "pass", "return", "_load_graph", "_save_graph"], "text_preview": "if len(eitems) > max_edges:\n                g[\"edges\"] = {k: v for k, v in eitems[:max_edges]}\n    except Exception:\n        pass\n    _save_graph(g)\n    try:\n        with open(stamp, \"w\", encoding=\"utf-8\") as f:\n            f.write(str(now))\n    except Exc", "line_start": 275, "line_end": 309}, {"sha": "727a44f9bcac4a7ca4ed76b709e5f0ff9daf09fa1fd2c0cfd5443e0dc91b146c", "index": 9, "path": "07dfc57c__jinx__micro__memory__graph.py\\727a44f9bcac4a7ca4ed76b709e5f0ff9daf09fa1fd2c0cfd5443e0dc91b146c.json", "terms": ["key", "out", "ranked", "append", "for", "items", "lambda", "list", "max", "return", "scores", "sorted", "str"], "text_preview": "ranked = sorted(scores.items(), key=lambda x: -x[1])[: max(1, k)]\n    out: List[str] = []\n    for key, sc in ranked:\n        out.append(f\"{key} ({sc:.2f})\")\n    return out", "line_start": 310, "line_end": 314}], "file_terms": ["str", "for", "nodes", "float", "get", "edges", "return", "except", "exception", "try", "line", "strip", "list", "def", "dict", "items", "from", "term", "any", "append", "import", "key", "out", "paths", "_add_node"]}