{"file_rel": "jinx\\micro\\memory\\ingest_dedup.py", "file_sha256": "5cc4281fe3399a9d78e5579b7004bc3f1f9c01f01a8c25ecc17a7f7fed3b465e", "updated_ts": 1760763312.4845395, "total_chunks": 3, "chunks": [{"sha": "0c4f58eb562144539a284acd9bd041ab7c79411e86ee11c3c6ab26b3b248fdb1", "index": 0, "path": "3a8c582c__jinx__micro__memory__ingest_dedup.py\\0c4f58eb562144539a284acd9bd041ab7c79411e86ee11c3c6ab26b3b248fdb1.json", "terms": ["import", "str", "path", "return", "line", "set", "def", "list", "try", "time", "dict", "from", "int", "_ledger", "_ledger_path", "_now_ms", "memory_dir", "entries", "errors", "except", "exception", "hashlib", "ignore", "tuple", "utf"], "text_preview": "from __future__ import annotations\n\nimport hashlib\nimport json\nimport os\nimport time\nfrom typing import Dict, Iterable, List, Set, Tuple\n\nfrom jinx.micro.memory.storage import memory_dir\n\n_LEDGER = \".mem_ingest_ledger.jsonl\"\n\n\ndef _now_ms() -> int:\n    try", "line_start": 1, "line_end": 48}, {"sha": "0676107d98eea8009d231a282c9a2b72343ab062b3862366a284e8156c79b924", "index": 1, "path": "3a8c582c__jinx__micro__memory__ingest_dedup.py\\0676107d98eea8009d231a282c9a2b72343ab062b3862366a284e8156c79b924.json", "terms": ["new_entries", "str", "seen", "ttl_ms", "len", "list", "append", "lines", "obj", "new_lines", "int", "continue", "except", "exception", "now", "out", "max_entries", "dict", "for", "get", "ledger", "return", "sha", "_now_ms", "_sha"], "text_preview": "obj = json.loads(line)\n                    except Exception:\n                        continue\n                    ts = int(obj.get(\"ts\") or 0)\n                    if ttl_ms > 0 and (now - ts) > ttl_ms:\n                        continue\n                    h", "line_start": 49, "line_end": 83}, {"sha": "2a7a85edc2c8fecdb56def569ad96f5494559730e4c354d75eb3f0d72032715b", "index": 2, "path": "3a8c582c__jinx__micro__memory__ingest_dedup.py\\2a7a85edc2c8fecdb56def569ad96f5494559730e4c354d75eb3f0d72032715b.json", "terms": ["cur", "max_entries", "new_entries", "int", "except", "exception", "try", "ttl_ms", "update_ledger", "obj", "path", "write", "__all__", "_ledger_path", "_now_ms", "exist_ok", "filter_new_lines", "load_ledger", "memory_dir", "new_lines", "and", "append", "def", "dict", "drop"], "text_preview": "# keep only last max_entries in memory; write will prune if needed\n    return (new_lines, new_entries)\n\n\ndef update_ledger(new_entries: List[dict], *, ttl_ms: int, max_entries: int = 5000) -> None:\n    path = _ledger_path()\n    now = _now_ms()\n    # Load e", "line_start": 84, "line_end": 111}], "file_terms": ["str", "cur", "int", "list", "new_entries", "except", "exception", "return", "try", "ttl_ms", "path", "import", "seen", "max_entries", "def", "dict", "obj", "len", "line", "set", "append", "now", "_now_ms", "new_lines", "continue"]}