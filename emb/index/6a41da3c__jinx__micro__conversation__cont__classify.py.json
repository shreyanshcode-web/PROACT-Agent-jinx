{"file_rel": "jinx\\micro\\conversation\\cont\\classify.py", "file_sha256": "bfd125c2214b000e420e85998e2384b33c65db06eea26d6f4d87a4f7528f63f0", "updated_ts": 1760763310.7074933, "total_chunks": 5, "chunks": [{"sha": "7d73ef671907f2ec9bb92ee460834e585a1f33774ddcc8aa1f5b9b426c27409c", "index": 0, "path": "6a41da3c__jinx__micro__conversation__cont__classify.py\\7d73ef671907f2ec9bb92ee460834e585a1f33774ddcc8aa1f5b9b426c27409c.json", "terms": ["import", "list", "from", "return", "text", "for", "question", "_model", "embed_text_cached", "and", "answer", "async", "def", "embedding", "embeddings", "float", "jinx", "json", "model", "not", "str", "texts", "that", "__future__", "_cache_path"], "text_preview": "from __future__ import annotations\n\nimport asyncio\nimport json\nimport os\nfrom typing import Dict, List, Tuple\n\nfrom jinx.micro.embeddings.embed_cache import embed_text_cached, embed_texts_cached\n\n# Cache file for prototype embeddings (per model)\n_CACHE_PAT", "line_start": 1, "line_end": 42}, {"sha": "02144e6c6cfe46e1f8432fb921f6f0591f19250cfc6ae050c73f5632eb160871", "index": 1, "path": "6a41da3c__jinx__micro__conversation__cont__classify.py\\02144e6c6cfe46e1f8432fb921f6f0591f19250cfc6ae050c73f5632eb160871.json", "terms": ["for", "return", "_cache_path", "items", "out", "texts", "def", "except", "exception", "try", "_load_cache", "_model", "float", "list", "batch", "cache", "dict", "encoding", "json", "key", "not", "obj", "open", "path", "utf"], "text_preview": "items = [(i, (t or \"\").strip()) for i, t in enumerate(texts)]\n    if not any(t for _, t in items):\n        return [[] for _ in texts]\n    try:\n        batch = [t for _, t in items]\n        vecs = await embed_texts_cached(batch, model=_MODEL)\n        out = ", "line_start": 43, "line_end": 81}, {"sha": "1c778512be865a4b47372f8858b88b02cac6c7e0794d1a7f893ac40621eba8b8", "index": 2, "path": "6a41da3c__jinx__micro__conversation__cont__classify.py\\1c778512be865a4b47372f8858b88b02cac6c7e0794d1a7f893ac40621eba8b8.json", "terms": ["list", "float", "for", "neg", "pos", "return", "not", "cnt", "out", "_mean", "neg_mean", "neg_vecs", "pos_mean", "pos_vecs", "cache", "get", "obj", "_embed", "append", "await", "continue", "def", "key", "len", "range"], "text_preview": "obj = cache.get(key) or {}\n        pos = obj.get(\"pos\") or []\n        neg = obj.get(\"neg\") or []\n        if pos and neg:\n            return pos, neg\n    # Compute\n    pos_vecs: List[List[float]] = []\n    neg_vecs: List[List[float]] = []\n    for t in _POS_T", "line_start": 82, "line_end": 125}, {"sha": "10e1cc6e415aee7453535cfc3eb09ac4b04bcafb3588f0d37f31ef327716c93b", "index": 3, "path": "6a41da3c__jinx__micro__conversation__cont__classify.py\\10e1cc6e415aee7453535cfc3eb09ac4b04bcafb3588f0d37f31ef327716c93b.json", "terms": ["float", "return", "strip", "vec", "math", "none", "str", "lines", "thr", "threshold", "_cos", "max_lines", "sqrt", "async", "await", "def", "for", "neg", "not", "pos", "question", "scan", "synth", "text", "_embed"], "text_preview": "s += float(x) * float(y)\n        na += float(x) * float(x)\n        nb += float(y) * float(y)\n    if na <= 0.0 or nb <= 0.0:\n        return 0.0\n    import math\n    return s / (math.sqrt(na) * math.sqrt(nb))\n\n\nasync def score_question_semantics(text: str) ->", "line_start": 126, "line_end": 160}, {"sha": "e4dcf626b15e6accfd1e804391f0134951c8c6bf9c517587f845abb49b6b65f4", "index": 4, "path": "6a41da3c__jinx__micro__conversation__cont__classify.py\\e4dcf626b15e6accfd1e804391f0134951c8c6bf9c517587f845abb49b6b65f4.json", "terms": ["for", "scores", "best", "append", "pairs", "else", "neg", "pos", "_cos", "cand_lines", "reversed", "tok", "await", "except", "exception", "keep", "return", "texts", "thr", "vecs", "_embed_many", "_ensure_protos", "any", "batch", "but"], "text_preview": "except Exception:\n            thr = 0.18\n    # Batch-embed to keep latency low\n    try:\n        # Pre-filter obvious code/log lines but keep order\n        pairs = []\n        for ln in cand_lines:\n            if any(tok in ln for tok in (\"def \", \"class \", \"", "line_start": 161, "line_end": 189}], "file_terms": ["return", "float", "for", "list", "not", "neg", "pos", "def", "await", "import", "out", "texts", "append", "cache", "except", "exception", "text", "try", "_cos", "_cache_path", "best", "none", "str", "strip", "and"]}