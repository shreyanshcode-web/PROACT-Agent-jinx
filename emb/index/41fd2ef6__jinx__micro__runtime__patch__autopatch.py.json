{"file_rel": "jinx\\micro\\runtime\\patch\\autopatch.py", "file_sha256": "84790fb91f83e29aa336740fe2ab9348237ce5259bf545b36f6282502f2240cf", "updated_ts": 1760763313.3019264, "total_chunks": 8, "chunks": [{"sha": "47abb037ffcf7c147d8f642743e0c2115d6ff76864d6fb2cdebd027b78934a43", "index": 0, "path": "41fd2ef6__jinx__micro__runtime__patch__autopatch.py\\47abb037ffcf7c147d8f642743e0c2115d6ff76864d6fb2cdebd027b78934a43.json", "terms": ["import", "from", "optional", "none", "str", "bool", "int", "dataclass", "false", "__future__", "_diff_stats", "_should_autocommit", "_truthy", "anchor_patch", "context_before", "context_patch", "context_tolerance", "diff_stats", "line_end", "line_patch", "line_start", "max_span", "patch_anchor_insert_after", "patch_context_replace", "patch_line_range"], "text_preview": "from __future__ import annotations\n\nimport os\nfrom dataclasses import dataclass\nfrom typing import Optional, Tuple, List, Callable, Awaitable, Dict\nimport time\n\nfrom jinx.micro.embeddings.search_cache import search_project_cached\nfrom .write_patch import p", "line_start": 1, "line_end": 36}, {"sha": "f6be472f85b33a06c5e538c942b6a77cf2b0a27ae262ad3e3bb9f3f4ed6c4c5f", "index": 1, "path": "41fd2ef6__jinx__micro__runtime__patch__autopatch.py\\f6be472f85b33a06c5e538c942b6a77cf2b0a27ae262ad3e3bb9f3f4ed6c4c5f.json", "terms": ["str", "preview", "args", "detail", "name", "return", "candidate", "true", "max_ms", "code", "path", "add", "async", "best", "bool", "coro", "def", "diff", "except", "exception", "getenv", "int", "mode", "rem", "returns"], "text_preview": "return str(os.getenv(name, default)).strip().lower() not in (\"\", \"0\", \"false\", \"off\", \"no\")\n    except Exception:\n        return True\n\n\nasync def _evaluate_candidate(name: str, coro) -> Tuple[str, bool, str, int]:\n    \"\"\"Run candidate in preview mode, retu", "line_start": 37, "line_end": 66}, {"sha": "03fb8fbcd29aa8dbce80408f230e5b416278aa991f5b3120dffd1628380e45a8", "index": 2, "path": "41fd2ef6__jinx__micro__runtime__patch__autopatch.py\\03fb8fbcd29aa8dbce80408f230e5b416278aa991f5b3120dffd1628380e45a8.json", "terms": ["args", "path", "max_span", "str", "and", "candidates", "tuple", "code", "int", "code_l", "line_end", "line_start", "no_budgets", "patch_line_range", "search_k", "awaitable", "bool", "callable", "def", "append", "else", "false", "lambda", "line", "preview"], "text_preview": "# Exhaustive mode: disable timeboxing and search caps if enabled\n    no_budgets = _truthy(\"JINX_AUTOPATCH_NO_BUDGETS\", \"1\")\n    max_ms_local = None if no_budgets else max_ms\n    try:\n        search_k = int(os.getenv(\"JINX_AUTOPATCH_SEARCH_TOPK\", \"3\"))\n    ", "line_start": 67, "line_end": 92}, {"sha": "6ca80b52dca1125de8416b4719e5b91570d0c1850b67b8073218d73aa4457802", "index": 3, "path": "41fd2ef6__jinx__micro__runtime__patch__autopatch.py\\6ca80b52dca1125de8416b4719e5b91570d0c1850b67b8073218d73aa4457802.json", "terms": ["args", "path", "code", "lambda", "preview", "anchor", "symbol", "append", "candidates", "false", "true", "context_tolerance", "patch_anchor_insert_after", "patch_symbol_body_python", "patch_symbol_python", "float", "and", "context", "else", "tol", "context_before", "jinx_patch_context_tol", "symbol_body", "except", "exception"], "text_preview": "\"symbol\",\n                lambda: patch_symbol_python(path, args.symbol or \"\", code, preview=True),\n                lambda: patch_symbol_python(path, args.symbol or \"\", code, preview=False),\n            ))\n        else:\n            candidates.append((\n    ", "line_start": 93, "line_end": 119}, {"sha": "726fd433cd159309f922c62a37a445a363dc56711132e34bf12ad016d66ccfba", "index": 4, "path": "41fd2ef6__jinx__micro__runtime__patch__autopatch.py\\726fd433cd159309f922c62a37a445a363dc56711132e34bf12ad016d66ccfba.json", "terms": ["path", "args", "query", "code", "lambda", "preview", "and", "false", "hits", "true", "context_before", "limit_ms", "patch_context_replace", "patch_semantic_in_file", "patch_write", "append", "candidates", "file", "semantic", "tol", "tolerance", "write", "max_ms", "max_time_ms", "no_budgets"], "text_preview": "lambda: patch_context_replace(path, args.context_before or \"\", code, preview=True, tolerance=tol),\n            lambda: patch_context_replace(path, args.context_before or \"\", code, preview=False, tolerance=tol),\n        ))\n\n    # 4) semantic in-file when we", "line_start": 120, "line_end": 147}, {"sha": "f353118d35fc2e55583e1f8cb7c9f083c962d8ac8924f7074525d68ab05c57ac", "index": 5, "path": "41fd2ef6__jinx__micro__runtime__patch__autopatch.py\\f353118d35fc2e55583e1f8cb7c9f083c962d8ac8924f7074525d68ab05c57ac.json", "terms": ["fpath", "le_h", "ls_h", "max_span", "args", "code", "lambda", "preview", "candidates", "get", "patch_line_range", "patch_semantic_in_file", "none", "append", "false", "for", "int", "query", "str", "true", "commit_factory", "embed_project_root", "line_end", "line_start", "prev_factory"], "text_preview": "f = str(h.get(\"file\") or \"\")\n            if not f:\n                continue\n            fpath = os.path.join(os.getenv(\"EMBED_PROJECT_ROOT\", os.getcwd()), f)\n            ls_h = int(h.get(\"line_start\") or 1)\n            le_h = int(h.get(\"line_end\") or 1)\n  ", "line_start": 148, "line_end": 169}, {"sha": "1d4ad00dd1783c62292ec7d44200568fbc53f5e410ede3f3be2021b2c6ea626d", "index": 6, "path": "41fd2ef6__jinx__micro__runtime__patch__autopatch.py\\1d4ad00dd1783c62292ec7d44200568fbc53f5e410ede3f3be2021b2c6ea626d.json", "terms": ["score", "diff", "best", "none", "preview", "args", "await", "hits", "name", "max_ms_local", "limit_ms2", "replace", "and", "cname", "code", "detail", "else", "not", "okc", "path", "query", "total", "_evaluate_candidate", "_should_autocommit", "commit_factory"], "text_preview": "if (max_ms_local is not None) and ((time.monotonic() - start_ts) * 1000.0 > max_ms_local):\n            break\n        cname, ok, diff, total = await _evaluate_candidate(name, prev_factory())\n        if not ok:\n            continue\n        # score: prefer au", "line_start": 170, "line_end": 191}, {"sha": "e24a79078cc02a5b210e34fd5a3b8091df816419c32122312a7e67033ea11fde", "index": 7, "path": "41fd2ef6__jinx__micro__runtime__patch__autopatch.py\\e24a79078cc02a5b210e34fd5a3b8091df816419c32122312a7e67033ea11fde.json", "terms": ["preview", "args", "return", "best", "fpath", "get", "str", "await", "max_span", "detail2", "ok2", "int", "bool", "candidate", "code", "commit", "detail", "detailc", "diff", "false", "name", "okc", "true", "embed_project_root", "line_end"], "text_preview": "fpath = os.path.join(os.getenv(\"EMBED_PROJECT_ROOT\", os.getcwd()), h.get(\"file\") or \"\")\n                if fpath:\n                    ok, detail = await patch_semantic_in_file(fpath, args.query or \"\", code, preview=bool(args.preview))\n                    i", "line_start": 192, "line_end": 208}], "file_terms": ["args", "preview", "path", "code", "str", "none", "lambda", "fpath", "false", "import", "true", "and", "candidates", "from", "query", "max_span", "best", "int", "name", "return", "optional", "bool", "diff", "append", "symbol"]}