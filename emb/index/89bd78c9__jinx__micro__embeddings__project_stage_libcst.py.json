{"file_rel": "jinx\\micro\\embeddings\\project_stage_libcst.py", "file_sha256": "c875f4ef3395214447d471ddc42132e5a253f3f3ce59072463e027ef67e66454", "updated_ts": 1760763311.4326308, "total_chunks": 9, "chunks": [{"sha": "9831458bebdbe55a111366c44061c6c8ea5d3e56d089721ee2768855e5f80268", "index": 0, "path": "89bd78c9__jinx__micro__embeddings__project_stage_libcst.py\\9831458bebdbe55a111366c44061c6c8ea5d3e56d089721ee2768855e5f80268.json", "terms": ["import", "str", "from", "ignore", "list", "type", "toks", "_ltxt", "any", "cst", "def", "isinstance", "libcst", "none", "append", "attribute", "cast", "cur", "limit", "mobj", "names", "positionprovider", "return", "try", "__future__"], "text_preview": "from __future__ import annotations\n\nimport time\nfrom typing import Any, Dict, List, Tuple, cast\n\ntry:\n    import libcst as cst  # type: ignore\n    from libcst import matchers as m  # type: ignore\n    from libcst.metadata import PositionProvider  # type: ig", "line_start": 1, "line_end": 42}, {"sha": "4d1a452f380f2b70afd00471c0b84d3cf24222e1c7833552446440dbbac1cf11", "index": 1, "path": "89bd78c9__jinx__micro__embeddings__project_stage_libcst.py\\4d1a452f380f2b70afd00471c0b84d3cf24222e1c7833552446440dbbac1cf11.json", "terms": ["parts", "return", "append", "cur", "names", "fn_names", "node", "value", "set", "any", "isinstance", "out", "seen", "str", "toks", "val", "_ltxt", "call", "except", "exception", "for", "list", "not", "try", "tset"], "text_preview": "parts.append(_ltxt(cur.attr.value))\n                cur = cur.value\n            if isinstance(cur, C.Name):\n                parts.append(_ltxt(cur.value))\n            parts.reverse()\n            if parts:\n                names.append(\".\".join(parts))\n     ", "line_start": 43, "line_end": 84}, {"sha": "8269c8d418d151df25dc44459a8297ab9a3540086f6fcd1734ab64cb9a315dc7", "index": 2, "path": "89bd78c9__jinx__micro__embeddings__project_stage_libcst.py\\8269c8d418d151df25dc44459a8297ab9a3540086f6fcd1734ab64cb9a315dc7.json", "terms": ["isinstance", "value", "nms", "for", "txt", "node", "_node_text_names", "any", "str", "tset", "fn_names", "assign", "attribute", "bytes", "call", "else", "except", "exception", "name", "target", "tgt", "try", "_ltxt", "evaluated_value", "and"], "text_preview": "for a in val.args:\n                    nms: List[str] = []\n                    if isinstance(a.value, C.Name) or isinstance(a.value, C.Attribute):\n                        nms = _node_text_names(a.value)\n                    elif isinstance(a.value, C.Simple", "line_start": 85, "line_end": 110}, {"sha": "7be8254ec3315b5a680bfac7de52c1b18600ef6dd61571fa8b2948c9f77d2f27", "index": 3, "path": "89bd78c9__jinx__micro__embeddings__project_stage_libcst.py\\7be8254ec3315b5a680bfac7de52c1b18600ef6dd61571fa8b2948c9f77d2f27.json", "terms": ["fn_names", "isinstance", "node", "exc", "call", "for", "_node_text_names", "exception", "any", "tset", "raise", "expr", "func", "return", "await", "except", "expression", "pass", "with", "context_expr", "and", "attribute", "calls", "context", "elif"], "text_preview": "sc += 0.5\n        except Exception:\n            pass\n        return sc\n\n    # Await Call(...)\n    if isinstance(node, C.Await) and isinstance(node.expression, C.Call):\n        fn_names = _node_text_names(node.expression.func)\n        if any(n in tset for n", "line_start": 111, "line_end": 146}, {"sha": "6243b41c86e38b2fb1f119ad5613a612507d26afbf6a2663cf5b5c4333d4ef37", "index": 4, "path": "89bd78c9__jinx__micro__embeddings__project_stage_libcst.py\\6243b41c86e38b2fb1f119ad5613a612507d26afbf6a2663cf5b5c4333d4ef37.json", "terms": ["node", "any", "name", "tset", "for", "try", "_ltxt", "except", "exception", "getattr", "isinstance", "pass", "return", "value", "name_nodes", "cast", "cst", "module", "attr", "decorators", "decs", "defined", "ignore", "type", "_node_text_names"], "text_preview": "return sc\n\n    # Decorators on function/class\n    if isinstance(node, (cast(Any, cst).FunctionDef, cast(Any, cst).ClassDef)):\n        try:\n            decs = node.decorators  # type: ignore[attr-defined]\n            for d in decs:\n                name_node", "line_start": 147, "line_end": 180}, {"sha": "27907a566915d67e90222397d3b75766523dcdaf3a0756c718a041a0cc079c27", "index": 5, "path": "89bd78c9__jinx__micro__embeddings__project_stage_libcst.py\\27907a566915d67e90222397d3b75766523dcdaf3a0756c718a041a0cc079c27.json", "terms": ["for", "tset", "node", "fn_names", "any", "exception", "return", "mod", "annotation", "_ltxt", "getattr", "critical", "debug", "error", "except", "info", "isinstance", "pass", "txt", "warning", "_node_text_names", "and", "annotations", "break", "call"], "text_preview": "if mod and (mod in tset or any(p in tset for p in mod.split(\".\"))):\n                sc += 0.7\n            for n in node.names or []:\n                nm = _ltxt(getattr(getattr(n, \"name\", None), \"value\", \"\"))\n                if nm in tset:\n                 ", "line_start": 181, "line_end": 216}, {"sha": "779c8247c22aef8dbcb441a3b6a5e0c14ddd460286669c321ac1411578e0066e", "index": 6, "path": "89bd78c9__jinx__micro__embeddings__project_stage_libcst.py\\779c8247c22aef8dbcb441a3b6a5e0c14ddd460286669c321ac1411578e0066e.json", "terms": ["str", "none", "any", "cst", "not", "return", "max_time_ms", "query", "src", "exclude_dirs", "max_file_bytes", "abs_p", "perf_counter", "time_up", "int", "cast", "continue", "def", "dict", "float", "for", "list", "mod", "time", "toks"], "text_preview": "def stage_libcst_hits(query: str, k: int, *, max_time_ms: int | None = 220) -> List[Tuple[float, str, Dict[str, Any]]]:\n    \"\"\"Stage: Python CST-based structural matching for many common query patterns.\n\n    Requires libcst; otherwise returns [].\n    \"\"\"\n ", "line_start": 217, "line_end": 251}, {"sha": "dadf5776433f00c8da5afb38c82760df04fa745570975e8fa4d6fe1d33a5082e", "index": 7, "path": "89bd78c9__jinx__micro__embeddings__project_stage_libcst.py\\dadf5776433f00c8da5afb38c82760df04fa745570975e8fa4d6fe1d33a5082e.json", "terms": ["none", "getattr", "int", "except", "exception", "node", "score", "best_for_file", "any", "basevisitor", "ignore", "line", "lines", "pos", "try", "type", "_match_interest", "on_visit", "time_up", "attr", "bool", "cast", "class", "continue", "cst"], "text_preview": "PP = PositionProvider  # not None due to earlier guard\n            pos = wrapper.resolve(PP)\n        except Exception:\n            continue\n        lines = src.splitlines()\n\n        best_for_file: Tuple[float, int, int] | None = None\n\n        BaseVisitor =", "line_start": 252, "line_end": 280}, {"sha": "1a4e1677b1ca6e32e7857a0c4b79815c759d3b1fe5bbec6ab2d04052a7b4bb65", "index": 8, "path": "89bd78c9__jinx__micro__embeddings__project_stage_libcst.py\\1a4e1677b1ca6e32e7857a0c4b79815c759d3b1fe5bbec6ab2d04052a7b4bb65.json", "terms": ["best_for_file", "lines", "len", "cur", "hits", "min", "rel_p", "none", "obj", "preview", "return", "__all__", "file_rel", "line_end", "line_start", "stage_libcst_hits", "text_preview", "above", "and", "append", "ast", "below", "break", "call", "embedding"], "text_preview": "b = min(len(lines), a + 24)\n                    cur = (score, a, b)\n                    if best_for_file is None or cur[0] > best_for_file[0]:\n                        best_for_file = cur\n                return True\n\n        try:\n            wrapper.visit(V", "line_start": 281, "line_end": 311}], "file_terms": ["node", "any", "return", "isinstance", "for", "exception", "fn_names", "str", "tset", "except", "try", "none", "value", "_ltxt", "_node_text_names", "cst", "call", "ignore", "list", "type", "cur", "getattr", "name", "import", "pass"]}