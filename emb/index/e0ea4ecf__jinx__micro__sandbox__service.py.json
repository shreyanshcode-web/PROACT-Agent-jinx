{"file_rel": "jinx\\micro\\sandbox\\service.py", "file_sha256": "6cf6a1d023f7d7881b2fee1622f29c873a2414463d75c38c46fae19e0d8cf148", "updated_ts": 1760763313.4266357, "total_chunks": 4, "chunks": [{"sha": "5f45e50e46ec055cf2f7814070320191824b40d4f4fadfa8883209d6371ea11f", "index": 0, "path": "e0ea4ecf__jinx__micro__sandbox__service.py\\5f45e50e46ec055cf2f7814070320191824b40d4f4fadfa8883209d6371ea11f.json", "terms": ["import", "from", "str", "optional", "tuple", "int", "_tboundedsem", "_tlock", "_sbx_conc", "jinx", "sandbox", "try", "_asyncio", "_sbx_ttl_ms", "_tevent", "blast_zone", "awaitable", "callable", "code", "cross", "dict", "except", "exception", "getenv", "identical"], "text_preview": "from __future__ import annotations\n\nfrom typing import Callable, Awaitable, Optional, Tuple\nimport asyncio as _asyncio\nimport os\nimport time as _time\nfrom threading import Event as _TEvent, Lock as _TLock, BoundedSemaphore as _TBoundedSem\n\nfrom jinx.sandbo", "line_start": 1, "line_end": 36}, {"sha": "5fffa2589b11c8b539116b6562a82e75f505b7658851e334f584b32ae078e61d", "index": 1, "path": "e0ea4ecf__jinx__micro__sandbox__service.py\\5fffa2589b11c8b539116b6562a82e75f505b7658851e334f584b32ae078e61d.json", "terms": ["none", "and", "ent", "key", "call", "return", "run", "_sbx_lock", "_time", "str", "code", "except", "exception", "get", "identical", "int", "not", "process", "the", "with", "_asyncio", "_code_key", "_now_ms", "_sbx_cache", "_sbx_state"], "text_preview": "return int(_time.monotonic_ns() // 1_000_000)\n    except Exception:\n        return int(_time.time() * 1000)\n\n\nasync def arcane_sandbox(c: str, call: Callable[[str | None], Awaitable[None]] | None = None) -> None:\n    \"\"\"Run code in a separate process and s", "line_start": 37, "line_end": 70}, {"sha": "2e01b003ef5e4ff4f58b1c4b15cd810b696d759cb32ad8e9aeb2f51c36df635e", "index": 2, "path": "e0ea4ecf__jinx__micro__sandbox__service.py\\2e01b003ef5e4ff4f58b1c4b15cd810b696d759cb32ad8e9aeb2f51c36df635e.json", "terms": ["callbacks", "none", "evt", "str", "call", "err", "acquired", "holder", "loop", "optional", "_asyncio", "_cb", "_sbx_state", "_sbx_tsem", "evt_to_wait", "run_sandbox", "append", "async", "await", "def", "key", "not", "true", "try", "_runner"], "text_preview": "callbacks: list[Tuple[_asyncio.AbstractEventLoop, Callable[[Optional[str]], Awaitable[None]]]] = []\n            if call is not None:\n                callbacks.append((loop, call))\n            _SBX_STATE[key] = (evt, None, callbacks)\n            first = Tru", "line_start": 71, "line_end": 104}, {"sha": "1c8563a7c426ab211e43f373a2a3c9a6d66921c1f45908b737abe8cf01272e80", "index": 3, "path": "e0ea4ecf__jinx__micro__sandbox__service.py\\1c8563a7c426ab211e43f373a2a3c9a6d66921c1f45908b737abe8cf01272e80.json", "terms": ["callbacks", "key", "_asyncio", "_sbx_state", "err", "evt", "holder", "_sbx_ttl_ms", "cb_snapshot", "await", "for", "loop", "update", "_now_ms", "_prev_err", "_runner", "_sbx_cache", "_sbx_lock", "_tevent", "create_task", "evt_to_wait", "run_coroutine_threadsafe", "to_thread", "allow", "and"], "text_preview": "with _SBX_LOCK:\n            evt, _prev_err, callbacks = _SBX_STATE.get(key, (_TEvent(), None, []))\n            # Update stored error for late readers\n            _SBX_STATE[key] = (evt, holder[\"err\"], callbacks)\n            evt.set()\n            # Snapshot", "line_start": 105, "line_end": 129}], "file_terms": ["none", "callbacks", "str", "key", "evt", "import", "_asyncio", "loop", "_sbx_state", "optional", "and", "call", "err", "from", "try", "except", "exception", "holder", "int", "_sbx_ttl_ms", "tuple", "await", "identical", "sandbox", "_sbx_lock"]}